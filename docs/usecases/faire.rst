Faire
=====

Data Generation
---------------

We crawled guides and FAQ documents from `faire.com/support<faire.com/support>`_, and then processed the data to only keep raw texts (e.g., removing image hyperlinks). After applying our document preparation steps, we obtain a documents of 1,758 passages with a maximum length of 400 tokens: ``faire_400.pkl``. Then, run the data generation scripts to generate questions and answers for each document.

**Generate Questions**
::

    python scripts/data/doc_to_q.py \
    -mode all \
    -document_path data/database/faire/faire_400.pkl \
    --prompt_model gpt-3.5-turbo \
    --num_hard_negs_per_doc 2 \
    --num_train_data 600 \
    --num_eval_test_data 150 \
    --save_dir data/training/faire_new

**Generate Answers**
::

    python scripts/data/doc_q_to_a.py \
    --prompt_model gpt-4-1106-preview \
    --dataset_w_q data/training/faire_new/train_w_q.jsonl \  # generated by the previous step
    --save_name train_w_qa.jsonl \
    --save_dir data/training/faire_new \
    --end_data_idx 4