Search.setIndex({"docnames": ["api_reference/index", "api_reference/local_rqa", "api_reference/local_rqa.evaluation", "api_reference/local_rqa.guardrails", "api_reference/local_rqa.pipelines", "api_reference/local_rqa.qa_llms", "api_reference/local_rqa.retrievers", "api_reference/local_rqa.schema", "api_reference/local_rqa.serve", "api_reference/local_rqa.text_loaders", "api_reference/local_rqa.trainers", "api_reference/local_rqa.trainers.qa_llm", "api_reference/local_rqa.trainers.retriever", "getting_started/installation", "getting_started/quickstart", "index", "modules/data", "modules/data/data_description", "modules/data/data_preparation", "modules/evaluation", "modules/evaluation/eval_e2e", "modules/evaluation/eval_retriever", "modules/serving", "modules/serving/acc_frameworks", "modules/serving/human_eval", "modules/serving/interactive", "modules/training", "modules/training/generator", "modules/training/generator/fid", "modules/training/generator/sft", "modules/training/generator/swr", "modules/training/retriever", "modules/training/retriever/ctl", "modules/training/retriever/dca", "modules/training/retriever/rpg", "playground/custom_rqa", "playground/custom_trainer", "usecases/databricks", "usecases/faire"], "filenames": ["api_reference/index.rst", "api_reference/local_rqa.rst", "api_reference/local_rqa.evaluation.rst", "api_reference/local_rqa.guardrails.rst", "api_reference/local_rqa.pipelines.rst", "api_reference/local_rqa.qa_llms.rst", "api_reference/local_rqa.retrievers.rst", "api_reference/local_rqa.schema.rst", "api_reference/local_rqa.serve.rst", "api_reference/local_rqa.text_loaders.rst", "api_reference/local_rqa.trainers.rst", "api_reference/local_rqa.trainers.qa_llm.rst", "api_reference/local_rqa.trainers.retriever.rst", "getting_started/installation.rst", "getting_started/quickstart.rst", "index.rst", "modules/data.rst", "modules/data/data_description.rst", "modules/data/data_preparation.rst", "modules/evaluation.rst", "modules/evaluation/eval_e2e.rst", "modules/evaluation/eval_retriever.rst", "modules/serving.rst", "modules/serving/acc_frameworks.rst", "modules/serving/human_eval.rst", "modules/serving/interactive.rst", "modules/training.rst", "modules/training/generator.rst", "modules/training/generator/fid.rst", "modules/training/generator/sft.rst", "modules/training/generator/swr.rst", "modules/training/retriever.rst", "modules/training/retriever/ctl.rst", "modules/training/retriever/dca.rst", "modules/training/retriever/rpg.rst", "playground/custom_rqa.rst", "playground/custom_trainer.rst", "usecases/databricks.rst", "usecases/faire.rst"], "titles": ["local_rqa", "local_rqa", "local_rqa.evaluation package", "local_rqa.guardrails package", "local_rqa.pipelines package", "local_rqa.qa_llms package", "local_rqa.retrievers package", "local_rqa.schema package", "local_rqa.serve package", "local_rqa.text_loaders package", "local_rqa.trainers namespace", "local_rqa.trainers.qa_llm namespace", "local_rqa.trainers.retriever namespace", "Installation", "Quickstart", "Welcome to LocalRQA\u2019s documentation!", "Data", "RQA Data Format", "Prepare RQA Data", "Evaluation", "End-to-End Evaluation", "Retriever Evaluation", "Serving", "Inference Acceleration Frameworks", "Static Human Evaluation", "Interactive Chat", "Training", "Training a Generator", "Fusion-in-Decoder Training (FiD)", "SFT with Gold Data (SFT)", "SFT with a Frozen Retriever (SwR)", "Training a Retriever", "Contrastive Learning (CTL)", "Distill from Cross-Attention scores (DCA)", "Distill from an LM\u2019s probability distribution (RPG)", "Customize your RQA system", "Customize Model Trainers", "Databricks", "Faire"], "terms": {"subpackag": 0, "evalu": [0, 1, 11, 12, 14, 15, 18, 22, 23, 26, 27, 28, 29, 30, 31, 32, 33, 34], "packag": [0, 1, 13, 16], "submodul": 0, "modul": [0, 17, 20], "metric": [0, 1, 14, 15, 19, 20, 21, 29, 37, 38], "score": [0, 1, 5, 6, 12, 19, 20, 21, 26, 31, 34, 38], "util": [0, 5, 7, 32], "content": [0, 1, 12, 16, 18, 37, 38], "guardrail": [0, 1], "base": [0, 2, 7, 8, 11, 12, 14, 18, 19, 20, 21, 23, 25, 26, 27, 28, 29, 30, 31, 32, 34, 37, 38], "pipelin": [0, 1, 6, 14, 15, 16, 20], "prompt": [0, 1, 25, 37, 38], "retrieval_qa": [0, 1, 14, 20], "qa_llm": [0, 1, 4, 10, 27, 28, 29, 30, 37, 38], "fid": [0, 1, 11, 26, 27], "huggingfac": [0, 1, 4, 19, 20, 21, 25, 28, 29, 30, 32, 33, 34], "openai": [0, 1, 4, 8, 18, 19, 20, 21, 37, 38], "sglang": [0, 1, 4, 15, 22, 23, 25], "tgi": [0, 1, 25], "vllm": [0, 1, 4, 15, 22, 23, 25], "retriev": [0, 1, 2, 4, 5, 8, 10, 11, 16, 17, 19, 20, 22, 23, 24, 26, 27, 28, 29, 32, 33, 34], "bm25_retriev": [0, 1], "faiss_retriev": [0, 1, 21], "schema": [0, 1, 6, 8, 14, 17, 24, 37, 38], "dialogu": [0, 1, 4, 8, 14, 17], "document": [0, 1, 2, 3, 4, 5, 6, 8, 9, 11, 12, 16, 19, 20, 21, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 37, 38], "serv": [0, 1, 14, 15, 17, 18, 20, 24, 25, 37, 38], "base_model_work": [0, 1], "control": [0, 1, 2, 5, 25, 34, 37, 38], "gradio_dialogu": [0, 1], "gradio_rqa": [0, 1], "gradio_static_serv": [0, 1, 24, 37, 38], "gradio_web_serv": [0, 1, 25, 37, 38], "model_work": [0, 1, 23, 25, 37, 38], "test_messag": [0, 1, 25, 37, 38], "text_load": [0, 1, 14, 37, 38], "langchain_text_load": [0, 1, 14, 37, 38], "llamaindex_text_load": [0, 1], "trainer": [0, 1, 26, 31], "namespac": [0, 1, 8, 37, 38], "dist_util": [0, 1], "compon": [0, 1, 3, 4, 5, 6, 15, 16, 17, 18], "run": [0, 1, 3, 4, 5, 6, 14, 16, 18, 19, 24, 25], "run_input_kei": [0, 1, 3, 4, 5, 6], "constant": 0, "accelerationframework": [0, 1], "errorcod": [0, 1], "context_overflow": [0, 1], "controller_no_work": [0, 1], "controller_worker_timeout": [0, 1], "cuda_out_of_memori": [0, 1], "engine_overload": [0, 1], "gradio_request_error": [0, 1], "gradio_stream_unknown_error": [0, 1], "incorrect_auth_kei": [0, 1], "internal_error": [0, 1], "invalid_auth_kei": [0, 1], "invalid_model": [0, 1], "no_permiss": [0, 1], "param_out_of_rang": [0, 1], "quota_exceed": [0, 1], "rate_limit": [0, 1], "validation_type_error": [0, 1], "init_logg": [0, 1, 10], "pretty_print_semaphor": [0, 1], "e2eevalu": [1, 2, 20], "compute_perform": [1, 2], "init_metr": [1, 2], "reset_all_metr": [1, 2], "evaluatorconfig": [1, 2, 11, 12, 20, 21], "assistant_prefix": [1, 2, 4, 5, 7, 8, 11, 20, 27, 29, 30, 37, 38], "batch_siz": [1, 2, 5, 11, 12, 20, 21], "e2e_lat": [1, 2, 20], "gen_answer_stat": [1, 2], "gen_bleu": [1, 2], "gen_f1": [1, 2, 20], "gen_gpt4ev": [1, 2, 20, 37, 38], "gen_lat": [1, 2, 20], "gen_precis": [1, 2, 20], "gen_roug": [1, 2, 20], "retr_document_accuraci": [1, 2], "retr_document_recal": [1, 2], "retr_lat": [1, 2, 20], "retr_ndcg": [1, 2], "sep_si": [1, 2, 4, 5, 7, 11, 20, 27, 29, 30, 37, 38], "sep_us": [1, 2, 4, 5, 7, 11, 20, 27, 29, 30, 37, 38], "user_prefix": [1, 2, 4, 5, 7, 8, 11, 20, 27, 29, 30, 37, 38], "retrieverevalu": [1, 2, 21], "answerstat": [1, 2], "comput": [1, 2, 5, 11, 12, 16, 18, 20, 22, 29, 34], "reset": [1, 2, 5], "updat": [1, 2, 4, 7, 16, 33, 34], "bleu": [1, 2, 20], "documentaccuraci": [1, 2], "documentndcg": [1, 2], "documentrecal": [1, 2], "calculate_recal": [1, 2], "f1": [1, 2], "gpt4eval": [1, 2], "judg": [1, 2, 20], "latenc": [1, 2, 23], "start": [1, 2, 5, 16, 18, 25, 37, 38], "stop": [1, 2, 5, 15], "monitoringmetr": [1, 2], "precis": [1, 2], "roug": [1, 2, 20], "runningmet": [1, 2], "document_similar": [1, 2], "is_almost_same_docu": [1, 2], "is_same_docu": [1, 2], "mean": [1, 2, 12, 17, 21, 24, 26, 27, 31, 32, 34, 37, 38], "em": [1, 2], "exact_match_scor": [1, 2], "f1_score": [1, 2], "recal": [1, 2, 20, 21, 38], "rouge_scor": [1, 2], "rouge_wrapp": [1, 2], "normalize_answ": [1, 2], "baseanswerguardrail": [1, 3, 4], "noopanswerguardrail": [1, 3], "rqapipelin": [1, 2, 4, 20], "qa": [1, 2, 4, 5, 14, 15, 16, 18, 19, 20, 26, 28, 29, 30], "update_dialogue_sess": [1, 4], "autorqa": [1, 4], "baserqa": [1, 4], "simplerqa": [1, 4, 8, 11, 14, 19, 20], "from_huggingfac": [1, 4], "from_huggingface_fid": [1, 4], "from_openai": [1, 4], "from_scratch": [1, 4, 8, 14], "from_sglang": [1, 4], "from_tgi": [1, 4], "from_vllm": [1, 4], "rephrase_quest": [1, 4], "baseqamodel": [1, 4, 5], "gener": [1, 4, 5, 8, 14, 16, 20, 21, 22, 23, 24, 25, 26, 28, 29, 30, 33], "is_api_model": [1, 5], "r_gener": [1, 5], "generationoutput": [1, 5], "batch_answ": [1, 3, 5, 7, 14], "checkpointwrapp": [1, 5], "forward": [1, 5], "encoderwrapp": [1, 5], "fidt5": [1, 5], "forward_": [1, 5], "from_t5": [1, 5], "get_crossattention_scor": [1, 5], "load_t5": [1, 5], "overwrite_forward_crossattent": [1, 5], "reset_score_storag": [1, 5], "set_checkpoint": [1, 5], "unwrap_encod": [1, 5], "wrap_encod": [1, 5], "apply_checkpoint_wrapp": [1, 5], "cross_attention_forward": [1, 5], "huggingfacefidqamodel": [1, 5], "encode_fid_input": [1, 5, 10, 11], "pack_fid_input": [1, 5], "unpack_fid_input": [1, 5], "huggingfaceqamodel": [1, 5], "openaiqamodel": [1, 5], "sglangclient": [1, 5], "generate_stream": [1, 5, 8], "sglangqamodel": [1, 5], "prepare_gen_kwarg": [1, 5], "tgiqamodel": [1, 5], "vllmclient": [1, 5], "vllmqamodel": [1, 5], "baseretriev": [1, 4, 6, 11], "dummyretriev": [1, 6], "retrievaloutput": [1, 6, 8], "batch_source_docu": [1, 3, 5, 6, 7, 14], "faissretriev": [1, 6, 12, 21], "from_disk": [1, 6], "prepare_docs_for_retriev": [1, 6], "retrieve_w_scor": [1, 6], "dialoguesess": [1, 3, 4, 5, 7, 8, 14, 17], "add_system_messag": [1, 7, 8], "add_user_messag": [1, 7, 8], "clone": [1, 7, 8, 13], "from_list": [1, 7], "histori": [1, 4, 7, 8, 17, 26, 27, 28, 29, 30, 32, 33, 34, 37, 38], "sep_styl": [1, 7], "to_list": [1, 7, 12, 17], "to_str": [1, 7], "dialogueturn": [1, 7], "from_dict": [1, 7], "messag": [1, 7, 8], "source_docu": [1, 7, 8], "speaker": [1, 7], "to_dict": [1, 7, 8, 17], "rqaoutput": [1, 3, 4, 7, 14], "batch_dialogue_sess": [1, 3, 4, 5, 7, 14], "separatorstyl": [1, 7], "singl": [1, 5, 7, 17, 19, 20, 26, 27, 29, 30, 31, 37, 38], "two": [1, 7, 16, 18, 22, 23, 34, 37, 38], "fmt_content": [1, 6, 7, 16, 17, 18, 24, 33, 37, 38], "from_langchain_doc": [1, 7], "metadata": [1, 6, 7, 8, 16, 17, 18, 33, 37, 38], "page_cont": [1, 7, 16, 17, 18, 33, 37, 38], "to_langchain_doc": [1, 7], "default_document_formatt": [1, 7], "basemodelwork": [1, 8], "count_token": [1, 8], "generate_g": [1, 8], "generate_stream_g": [1, 8], "get_queue_length": [1, 8], "get_statu": [1, 8], "init_heart_beat": [1, 8], "register_to_control": [1, 8], "send_heart_beat": [1, 8], "acquire_worker_semaphor": [1, 8], "api_count_token": [1, 8], "api_gener": [1, 8], "api_generate_stream": [1, 8], "api_get_conv": [1, 8], "api_get_statu": [1, 8], "api_model_detail": [1, 8], "api_retriev": [1, 8], "create_background_task": [1, 8], "heart_beat_work": [1, 8], "release_worker_semaphor": [1, 8], "get_worker_address": [1, 8], "get_worker_statu": [1, 8], "handle_no_work": [1, 8], "handle_worker_timeout": [1, 8], "list_model": [1, 8], "receive_heart_beat": [1, 8], "refresh_all_work": [1, 8], "register_work": [1, 8], "remove_stale_workers_by_expir": [1, 8], "remove_work": [1, 8], "worker_api_generate_stream": [1, 8], "worker_api_get_statu": [1, 8], "worker_api_retriev": [1, 8], "dispatchmethod": [1, 8], "lotteri": [1, 8], "shortest_queu": [1, 8], "from_str": [1, 8], "workerinfo": [1, 8], "check_heart_beat": [1, 8], "last_heart_beat": [1, 8], "model_nam": [1, 5, 8], "queue_length": [1, 8], "speed": [1, 5, 8, 22, 23, 25], "create_control": [1, 8], "heart_beat_control": [1, 8], "annotationhistori": [1, 8], "get_current_idx": [1, 8], "get_current_label": [1, 8], "get_next_idx": [1, 8], "get_num_label": [1, 8], "get_num_to_label": [1, 8], "get_prev_idx": [1, 8], "is_all_label": [1, 8], "load": [1, 5, 6, 8, 9, 14, 17, 18, 19, 20, 21, 25, 26, 37, 38], "parse_int_rang": [1, 8], "to_jsonl": [1, 8], "update_label": [1, 8], "gradiodialoguesess": [1, 8], "get_prompt": [1, 8], "skip_next": [1, 8], "to_gradio_chatbot": [1, 8], "gradiorqa": [1, 8], "generate_stream_from_api": [1, 8], "get_model": [1, 8], "get_token": [1, 8], "prepare_prompt_for_gener": [1, 8], "rephrase_question_for_retriev": [1, 8], "gradiosimplerqa": [1, 8], "arg": [1, 2, 3, 4, 5, 6, 8, 9, 37, 38], "build_demo": [1, 8], "document_view": [1, 8], "get_conv_log_filenam": [1, 8], "load_demo": [1, 8], "render_next_sess": [1, 8], "render_prev_sess": [1, 8], "render_single_sess": [1, 8], "save_annot": [1, 8], "vote_correct": [1, 8], "vote_harmless": [1, 8], "vote_help": [1, 8], "vote_respons": [1, 8], "add_text": [1, 8], "clear_histori": [1, 8], "downvote_last_respons": [1, 8], "flag_last_respons": [1, 8], "get_model_list": [1, 8], "http_gener": [1, 8], "http_retriev": [1, 8], "load_demo_refresh_model_list": [1, 8], "regener": [1, 8], "upvote_last_respons": [1, 8], "violates_moder": [1, 8], "vote_last_respons": [1, 8], "modelwork": [1, 8], "add_model_arg": [1, 8], "create_model_work": [1, 8], "load_model": [1, 8], "main": [1, 3, 4, 5, 6, 8, 37, 38], "basetextload": [1, 9], "load_data": [1, 9, 14, 37, 38], "save_text": [1, 9], "langchaintextload": [1, 9, 14, 37, 38], "llamaindextextload": [1, 9, 37, 38], "argument": [1, 3, 4, 5, 6, 10, 20, 21, 23, 25, 26, 28, 29, 30, 32, 33, 34, 37, 38], "dataset": [1, 10, 16, 20, 21, 28, 29, 30, 31, 32, 33, 34], "supervised_fid_train": [1, 10], "supervised_train": [1, 10], "with_retriever_fid_train": [1, 10], "with_retriever_train": [1, 10], "embed": [1, 4, 5, 6, 8, 10, 11, 14, 16, 17, 19, 20, 21, 25, 26, 28, 29, 30, 31, 32, 33, 34, 37, 38], "retriever_fid_train": [1, 10], "retriever_replug_train": [1, 10], "retriever_train": [1, 10], "barrier": [1, 10], "get_rank": [1, 10], "is_main": [1, 10], "create_dir_if_not_exist": [1, 10], "remove_optimizer_weight": [1, 10], "class": [1, 2, 3, 4, 5, 6, 7, 8, 9, 11, 12, 14, 16, 19, 20, 21, 23, 25, 26, 28, 29, 30, 32, 33, 34], "abc": [1, 2, 6, 8, 9], "build": 1, "block": [1, 5], "which": [1, 5, 7, 14, 16, 17, 19, 20, 21, 25, 33, 34, 37], "call": [1, 2, 5], "method": [1, 3, 4, 5, 6, 8, 15, 16, 17, 18, 19, 20, 21, 22, 28, 29, 37, 38], "iter": [1, 20], "abstract": [1, 2, 3, 5, 6, 8, 9], "kwarg": [1, 2, 3, 4, 5, 6, 8, 9, 12, 14, 37, 38], "entrypoint": [1, 3, 4, 5, 6, 23, 25], "keyword": [1, 3, 4, 5, 6], "pass": [1, 3, 4, 5, 6, 20, 37, 38], "thi": [1, 2, 3, 4, 5, 6, 7, 8, 14, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 37, 38], "valu": [1, 5, 7, 8], "enum": [1, 7, 8], "an": [1, 2, 4, 5, 8, 11, 12, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 37, 38], "enumer": [1, 8], "intenum": 1, "http": [1, 5, 13, 14, 20, 23, 25, 37, 38], "platform": [1, 37], "com": [1, 13, 14, 20, 37, 38], "doc": [1, 5, 9, 11, 12, 14, 16, 18, 37, 38], "guid": [1, 5, 15], "error": [1, 5], "code": [1, 5, 14, 20, 21, 37, 38], "api": [1, 5, 8, 19, 37], "40303": 1, "50005": 1, "50006": 1, "50002": 1, "42903": 1, "50003": 1, "50004": 1, "40102": 1, "50001": 1, "40101": 1, "40301": 1, "40103": 1, "40302": 1, "42902": 1, "42901": 1, "40001": 1, "true": [1, 2, 5, 10, 11, 12, 20, 27, 29, 30, 33, 37, 38], "is_distribut": [1, 10], "fals": [1, 2, 4, 5, 8, 10, 11, 12, 20, 33], "filenam": [1, 10], "none": [1, 2, 4, 5, 6, 8, 10, 11, 12], "semaphor": 1, "config": [2, 5, 20, 21], "test_data": [2, 20, 21], "list": [2, 3, 4, 5, 6, 7, 8, 9, 11, 12, 14, 17, 18, 28, 29, 30, 32, 33, 34], "dict": [2, 4, 5, 7, 8, 11, 12, 16, 24], "end": [2, 11, 16, 19, 21, 24, 25, 26, 27, 37, 38], "perform": [2, 3, 5, 11, 12, 17, 19, 20, 21, 23, 24, 25, 26, 27, 28, 29, 30, 31, 37, 38], "accuraci": 2, "accurarci": 2, "model": [2, 4, 5, 6, 8, 11, 12, 14, 15, 16, 18, 19, 20, 21, 22, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 37, 38], "paramet": [2, 3, 4, 5, 6, 7, 8, 9, 11, 12, 33, 34], "_type_": [2, 4, 5, 6, 7, 8, 11], "_description_": [2, 3, 4, 5, 7, 8, 11], "prefix": [2, 5, 20, 21, 29, 30], "wrapped_model": 2, "eval": [2, 11, 12, 20, 37, 38], "tupl": [2, 5, 11, 12], "str": [2, 3, 4, 5, 6, 7, 8, 11, 12, 14, 16], "ani": [2, 5, 7, 9, 11, 12, 16, 19, 20, 21, 23, 37, 38], "metric_typ": 2, "int": [2, 5, 8, 11, 12], "4": [2, 5, 12, 18, 20, 21, 27, 28, 29, 30, 31, 32, 33, 34, 37, 38], "bool": [2, 4, 5, 8, 11, 12], "assist": [2, 4, 5, 7, 8, 11, 30, 38], "user": [2, 3, 4, 5, 7, 8, 11, 14, 15, 16, 17, 22, 24, 25, 27, 30, 31, 37, 38], "": [2, 4, 5, 7, 11, 12, 17, 18, 22, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 37, 38], "object": [2, 5, 7, 8, 11, 12, 14, 18, 19, 20, 21, 37, 38], "what": [2, 5, 12, 14, 17, 20, 21, 24, 25, 37, 38], "dure": [2, 11, 20, 21, 23, 27, 28, 29, 30, 31, 34, 37, 38], "well": [2, 15], "other": [2, 5, 17, 18, 20, 21, 24, 27, 28, 29, 30, 31, 32, 33, 34, 37, 38], "relat": [2, 17, 20], "name": [2, 8, 23, 25], "answer_stat": 2, "batch_quest": [2, 3, 4, 5, 6, 14], "batch_gen_answ": 2, "batch_gold_answ": 2, "batch_retrieved_doc": 2, "batch_gold_doc": 2, "document_accuraci": 2, "document_ndcg": 2, "document_recal": [2, 31, 32, 33, 34, 38], "retrieved_doc": [2, 8, 24], "gold_doc": [2, 17, 24, 33, 37, 38], "num": 2, "use_gold_answ": 2, "question": [2, 4, 5, 6, 7, 8, 12, 16, 17, 24, 26, 27, 28, 29, 30, 32, 33, 34, 37, 38], "refer": [2, 14, 15, 16, 17, 18, 19, 20, 21, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 37, 38], "answer": [2, 3, 4, 5, 7, 16, 17, 22, 26, 27, 28, 29, 30, 33, 34, 37, 38], "num_samples_seen": 2, "record": 2, "someth": 2, "e": [2, 4, 5, 7, 13, 16, 17, 20, 22, 24, 27, 28, 29, 30, 31, 32, 33, 34], "g": [2, 4, 5, 7, 16, 17, 20, 22, 24, 28, 29, 30, 32, 33, 34], "time": [2, 16, 17, 23], "elaps": 2, "between": [2, 5, 32, 33, 34], "return": [2, 3, 4, 5, 6, 7, 8, 9, 11, 12, 20, 21, 37, 38], "overal": 2, "us": [2, 5, 6, 7, 8, 9, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 37, 38], "veri": [2, 15, 23], "differ": [2, 7, 19, 22, 33, 34, 37, 38], "each": [2, 5, 11, 12, 17, 22, 23, 27, 28, 30, 31, 32, 33, 34, 37, 38], "bach": 2, "input": [2, 5, 11, 12, 24, 25, 27, 28, 29, 30], "averag": [2, 5], "src_doc": 2, "target_doc": 2, "threshold": 2, "0": [2, 5, 11, 12, 14, 23, 25, 28, 31, 32, 33, 34, 37, 38], "7": [2, 11, 16, 18], "l": 2, "predict": [2, 5, 11, 12, 20, 21, 24, 37, 38], "ground_truth": 2, "normalize_fn": 2, "type": [2, 3, 4, 5, 6, 7, 9, 11, 12, 18], "callabl": [2, 5, 11, 12], "function": [2, 5, 16, 17, 37, 38], "lambda": 2, "action": 3, "fact": 3, "check": [3, 5, 8, 11, 12], "safeti": 3, "filter": [3, 37], "etc": [3, 7, 14, 16, 18], "post": [3, 5], "process": [3, 5, 17, 20, 21, 23, 37, 38], "respons": [3, 5, 14, 20, 22, 23, 24, 25], "befor": [3, 5, 11, 12, 17], "rais": [3, 5, 6, 8, 9], "notimplementederror": [3, 5, 8, 9], "dummi": 3, "through": [3, 4, 5, 15, 32], "given": [4, 5, 6, 14, 15, 19, 25, 27, 31, 37, 38], "make": [4, 5, 15, 20, 25], "up": [4, 5, 16, 22, 23], "assum": [4, 7, 11, 20, 26], "you": [4, 5, 8, 14, 15, 16, 17, 18, 19, 20, 21, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 37, 38], "can": [4, 5, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 27, 28, 29, 30, 32, 33, 34, 37, 38], "directli": [4, 5, 14, 15, 17, 18, 20, 22], "pipe": 4, "all": [4, 5, 8, 11, 12, 16, 17, 18, 24, 25, 26, 27, 37, 38], "dataclass": 4, "contain": [4, 5, 16, 17, 18, 20, 21, 24], "sourc": [4, 5, 7, 15, 16, 18, 37], "retrieval_qa_output": 4, "session": [4, 7, 8], "from": [4, 5, 6, 13, 14, 15, 16, 19, 20, 21, 22, 25, 26, 27, 28, 29, 30, 31, 32, 37, 38], "current": [4, 18, 19, 20, 22, 26, 34, 37, 38], "turn": [4, 7, 17, 25, 28, 29, 30], "system": [4, 7, 15, 16, 17, 19, 20, 21, 22, 23, 27, 33], "answer_guardrail": 4, "take": [4, 5, 16, 20, 27], "exactli": 4, "three": [4, 17, 20, 21, 37, 38], "them": [4, 5, 14, 15, 16, 17, 18, 19, 22, 28, 37, 38], "sequenc": [4, 5, 11], "verbos": [4, 8], "static": [4, 5, 6, 7, 16, 20, 22, 37, 38], "qa_model": [4, 11], "automodelforcausallm": [4, 5], "qa_token": 4, "autotoken": [4, 5, 11, 37, 38], "qa_model_name_or_path": [4, 8, 14, 19, 20, 23, 25, 37, 38], "qa_model_init_kwarg": 4, "initi": [4, 5, 33], "simpl": [4, 14, 22, 26, 29], "rqa": [4, 6, 8, 15, 19, 20, 22, 23, 27, 28, 29, 30, 32, 33, 34], "alreadi": [4, 5], "option": [4, 5, 6, 11, 12, 16, 17, 18, 24, 25, 26, 27, 31, 33, 37, 38], "default": [4, 5, 6, 11, 12, 16, 20, 21, 23, 24, 25, 34, 37, 38], "fusion": [4, 5, 26, 27], "decod": [4, 5, 26, 27, 29, 30, 31, 33], "qa_model_nam": 4, "gpt": [4, 18, 20, 37, 38], "3": [4, 5, 11, 12, 14, 18, 20, 21, 25, 28, 30, 37, 38], "5": [4, 8, 14, 18, 19, 20, 23, 25, 26, 30, 33, 37, 38], "turbo": [4, 18, 37, 38], "classmethod": [4, 8], "database_path": [4, 6, 8], "document_path": [4, 6, 8, 14, 18, 19, 20, 21, 23, 25, 37, 38], "index_path": [4, 6, 8, 12, 14, 17, 19, 20, 21, 23, 25, 37, 38], "index": [4, 6, 8, 12, 14, 15, 16, 18, 19, 20, 21, 23, 25, 27, 28, 29, 30, 34, 37, 38], "embedding_model_name_or_path": [4, 8, 14, 19, 20, 21, 23, 25, 37, 38], "text": [4, 5, 6, 7, 8, 9, 12, 14, 16, 18, 21, 22, 23, 26, 33, 37, 38], "ada": [4, 8, 37, 38], "002": [4, 8, 37, 38], "lmsy": [4, 8, 14, 19, 20, 23, 25, 26, 28, 30], "vicuna": [4, 8, 14, 19, 20, 23, 25, 26, 30], "7b": [4, 8, 14, 19, 20, 23, 25, 26, 27, 29, 30, 37, 38], "v1": [4, 8, 14, 19, 20, 23, 25, 26, 28, 30, 38], "qa_is_fid": [4, 8], "qa_model_url": 4, "host": [4, 5, 23, 25, 37, 38], "infer": [4, 5, 15, 19, 20, 22, 25, 34], "intial": 4, "llama": [4, 16, 18, 37, 38], "2": [4, 5, 7, 8, 14, 16, 18, 20, 21, 22, 25, 26, 27, 28, 29, 30, 37, 38], "rephras": [4, 5, 6], "everi": [4, 5, 16, 17, 34], "standalon": [4, 19, 37, 38], "llm": [5, 16, 18, 20, 37, 38], "set": [5, 16, 19, 20, 22, 24, 25, 26, 27, 31, 37, 38], "batched_prompt": 5, "tokenization_kwarg": 5, "generation_kwarg": 5, "potenti": 5, "purpos": [5, 17], "augement": 5, "token": [5, 11, 12, 18, 37, 38], "use_checkpoint": 5, "wrapper": [5, 8], "replac": [5, 25, 37, 38], "output": [5, 11, 12, 19, 20, 21, 23, 27, 31], "empti": [5, 14, 17, 19, 20, 21, 25], "tensor": [5, 11, 12], "allow": [5, 15, 24, 25, 27, 31, 38], "checkpoint": [5, 37, 38], "hidden_st": 5, "attention_mask": 5, "position_bia": 5, "defin": [5, 20, 21], "should": [5, 11, 12, 16, 17, 20, 23, 25, 34, 37, 38], "overridden": 5, "subclass": [5, 11, 12, 20], "although": 5, "recip": 5, "need": [5, 18, 20, 21, 23, 24, 25, 33, 37, 38], "within": [5, 32], "one": [5, 16, 17, 25, 28, 29, 30, 32, 37, 38], "instanc": [5, 23, 27, 31, 37, 38], "afterward": 5, "instead": 5, "sinc": [5, 17, 23, 26, 28, 29, 30, 32, 33, 34], "former": 5, "care": 5, "regist": [5, 25], "hook": 5, "while": [5, 18, 25], "latter": 5, "silent": 5, "ignor": [5, 11, 12], "encod": [5, 17, 26, 27, 28, 31, 33], "t5": [5, 12, 28, 33], "obtain": [5, 17, 18, 24, 25, 28, 29, 30, 32, 33, 34, 37, 38], "input_id": 5, "t5forconditionalgener": 5, "The": [5, 6, 11, 12, 16, 17, 18, 19, 20, 21, 23, 24, 27, 31, 37, 38], "overrid": [5, 11, 12], "__call__": 5, "special": 5, "tip": 5, "pre": [5, 15, 22, 24, 26, 37], "step": [5, 11, 12, 16, 17, 18, 20, 21, 23, 25, 34, 37, 38], "torch": [5, 11, 12], "longtensor": 5, "shape": 5, "sequence_length": 5, "indic": [5, 19, 26, 28, 29, 30, 33], "vocabulari": 5, "i": [5, 6, 8, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 37, 38], "rel": 5, "posit": [5, 32], "so": [5, 6, 8, 16, 19, 20], "abl": 5, "pad": 5, "both": [5, 6, 11, 12, 19, 26, 37, 38], "right": 5, "left": 5, "see": [5, 14, 15, 16, 17, 22, 24, 25, 28, 29, 30, 32, 33, 34], "pretrainedtoken": 5, "detail": [5, 16, 17, 19, 22, 24, 25, 27, 28, 29, 30, 31, 32, 33, 34, 37, 38], "ar": [5, 8, 12, 16, 17, 18, 19, 20, 21, 23, 24, 25, 26, 27, 28, 29, 30, 32, 33, 34, 37, 38], "id": [5, 25, 33], "glossari": 5, "To": [5, 15, 16, 17, 18, 19, 20, 21, 22, 23, 25, 26, 27, 37, 38], "know": 5, "more": [5, 15, 16, 18, 19, 22, 24, 25, 27, 28, 29, 30, 31, 32, 33, 34, 37, 38], "how": [5, 11, 12, 14, 18, 22, 24, 25, 34, 37, 38], "prepar": [5, 6, 16, 17, 24, 25, 33], "pretrain": 5, "look": [5, 16, 17, 37, 38], "train": [5, 11, 12, 14, 15, 18, 19, 29, 30, 32, 33, 34], "floattensor": 5, "mask": [5, 12], "avoid": [5, 17, 26], "attent": [5, 26, 31], "select": [5, 31, 37, 38], "1": [5, 7, 8, 11, 12, 14, 16, 18, 20, 21, 22, 24, 25, 28, 30, 33, 34, 37, 38], "decoder_input_id": 5, "target_sequence_length": 5, "pad_token_id": 5, "If": [5, 16, 17, 19, 20, 21, 23, 37, 38], "past_key_valu": 5, "onli": [5, 11, 12, 16, 17, 24, 37, 38], "last": [5, 11, 12], "have": [5, 16, 17, 20, 21, 37, 38], "decoder_attention_mask": 5, "booltensor": 5, "behavior": [5, 11, 12, 20, 21, 26, 37, 38], "causal": 5, "also": [5, 15, 16, 20, 21, 22, 23, 24, 25, 27, 31, 33, 37, 38], "head_mask": 5, "num_head": 5, "num_lay": 5, "nullifi": 5, "head": 5, "self": 5, "decoder_head_mask": 5, "cross_attn_head_mask": 5, "cross": [5, 26, 28, 29, 30, 31, 32], "encoder_output": 5, "consist": [5, 20, 21], "last_hidden_st": 5, "hidden_s": 5, "hidden": [5, 28], "state": [5, 8, 28], "layer": 5, "length": [5, 11, 12, 33, 37, 38], "n_layer": 5, "embed_size_per_head": 5, "precomput": 5, "kei": [5, 8, 11, 12, 18], "those": [5, 16], "don": 5, "t": [5, 15], "past": 5, "inputs_emb": 5, "choos": [5, 38], "represent": [5, 7], "want": [5, 16, 17, 19, 20, 37, 38], "over": [5, 37, 38], "convert": [5, 7, 16, 37, 38], "associ": [5, 16, 18, 20], "vector": [5, 16], "than": [5, 25, 38], "intern": 5, "lookup": 5, "matrix": 5, "decoder_inputs_emb": 5, "unset": 5, "use_cach": 5, "output_attent": 5, "whether": [5, 8, 11, 12], "under": [5, 11, 12, 18, 19, 20, 21, 24, 25, 28, 29, 30, 32, 33, 34, 37, 38], "output_hidden_st": 5, "return_dict": 5, "modeloutput": 5, "plain": 5, "label": [5, 8, 11, 12, 33], "classif": 5, "regress": 5, "loss": [5, 11, 12, 28, 29, 30, 32], "100": [5, 11, 12, 38], "vocab_s": 5, "transform": [5, 11, 12, 26], "modeling_output": 5, "seq2seqlmoutput": 5, "A": [5, 8, 11, 12, 16, 18, 21, 24], "when": [5, 11, 12, 16, 23, 25, 34, 37, 38], "compris": 5, "variou": [5, 14, 18, 26], "element": [5, 11, 12, 26], "depend": [5, 16], "configur": [5, 14, 16, 19, 20, 21, 37, 38], "t5config": 5, "provid": [5, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 31, 34, 37, 38], "languag": [5, 20, 25, 34], "logit": [5, 11, 12], "softmax": [5, 34], "addit": [5, 16, 37, 38], "encoder_sequence_length": 5, "sequenti": 5, "decoder_hidden_st": 5, "ha": 5, "plu": [5, 16], "decoder_attent": 5, "weight": 5, "after": [5, 20, 21], "cross_attent": 5, "encoder_last_hidden_st": 5, "encoder_hidden_st": 5, "encoder_attent": 5, "exampl": [5, 12, 14, 16, 17, 18, 19, 20, 21, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 37, 38], "python": [5, 18, 19, 20, 21, 23, 24, 25, 27, 28, 29, 30, 31, 32, 33, 34, 37, 38], "import": [5, 14, 16, 20, 21, 37, 38], "from_pretrain": [5, 37, 38], "summar": [5, 20], "studi": 5, "shown": [5, 25], "own": [5, 14, 15, 16, 18, 20, 21, 26], "dog": 5, "good": [5, 16], "return_tensor": 5, "pt": 5, "batch": [5, 6, 12, 32, 37, 38], "size": [5, 18, 28, 30, 37, 38], "print": [5, 14, 27, 31], "model_name_or_path": [5, 10, 12, 18, 27, 28, 29, 30, 31, 32, 33, 34, 37, 38], "max_new_token": [5, 8], "warn": [5, 11, 12], "most": [5, 11, 12, 17, 19, 20, 21, 25, 26, 28, 29, 30, 31, 32, 33, 34], "generation_config": 5, "correspond": [5, 9, 18, 32], "num_beam": 5, "do_sampl": 5, "For": [5, 14, 16, 17, 18, 19, 20, 21, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 34, 37, 38], "overview": [5, 18], "strategi": 5, "out": [5, 37, 38], "follow": [5, 16, 17, 18, 20, 21, 22, 24, 37, 38], "generation_strategi": 5, "vari": [5, 16], "modal": 5, "bos_token_id": 5, "format": [5, 7, 14, 16, 18, 24, 28, 29, 30, 32, 33, 34], "repres": [5, 7, 16, 17, 18, 38], "input_valu": 5, "input_featur": 5, "pixel_valu": 5, "generationconfig": 5, "parametr": 5, "match": 5, "attribut": 5, "had": 5, "prioriti": 5, "json": [5, 14, 18, 20, 21, 33, 37, 38], "file": [5, 6, 9, 14, 20, 21, 24, 28, 29, 30, 32, 33, 34, 37, 38], "exist": [5, 16, 25], "pleas": [5, 15, 18, 19, 20, 25, 27, 31, 37, 38], "note": [5, 7, 16, 20, 21, 24, 25, 34, 37, 38], "unspecifi": 5, "inherit": 5, "whose": 5, "parameter": 5, "logits_processor": 5, "logitsprocessorlist": 5, "custom": [5, 11, 12, 37, 38], "processor": 5, "complement": 5, "built": [5, 15], "creat": [5, 14, 15, 16, 17, 18, 37, 38], "thrown": 5, "featur": 5, "intend": 5, "advanc": 5, "stopping_criteria": 5, "stoppingcriterialist": 5, "criteria": 5, "your": [5, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 37, 38], "sure": [5, 20, 25], "return_dict_in_gener": 5, "output_scor": 5, "prefix_allowed_tokens_fn": 5, "constraint": 5, "beam": 5, "search": [5, 12, 15, 17], "appli": 5, "batch_id": 5, "It": [5, 8, 15, 18, 32, 33], "next": [5, 37, 38], "condit": [5, 27], "previous": 5, "inputs_id": 5, "constrain": 5, "describ": 5, "autoregress": 5, "entiti": 5, "arxiv": [5, 21], "org": 5, "ab": 5, "2010": 5, "00904": 5, "synced_gpu": 5, "continu": 5, "loop": [5, 11, 12, 26], "until": 5, "max_length": [5, 11, 12], "unless": 5, "flag": 5, "deepspe": [5, 11, 12, 37, 38], "zero": [5, 21], "stage": 5, "multipl": [5, 23], "gpu": [5, 19, 20, 25, 26, 37, 38], "environ": 5, "hang": 5, "finish": 5, "otherwis": [5, 8, 21, 25], "ll": [5, 14], "assistant_model": 5, "pretrainedmodel": [5, 11, 12], "acceler": [5, 8, 15, 19, 20, 25], "must": [5, 6, 9, 18], "exact": [5, 16], "same": [5, 17, 25, 26, 32, 37, 38], "achiev": 5, "forecast": 5, "candid": 5, "much": [5, 26], "faster": 5, "re": [5, 16, 17], "As": [5, 14, 16, 37, 38], "smaller": 5, "streamer": 5, "basestream": 5, "stream": [5, 31], "put": 5, "token_id": 5, "further": [5, 22, 25, 37, 38], "negative_prompt_id": 5, "neg": [5, 17, 26, 31, 32, 37, 38], "some": [5, 11, 12, 16, 37], "cfg": 5, "experiment": 5, "subject": 5, "break": 5, "chang": [5, 14, 16, 18, 23, 25], "futur": 5, "version": [5, 16, 17, 24], "negative_prompt_attention_mask": 5, "ad": [5, 7, 16], "hoc": 5, "generate_config": 5, "specif": [5, 16, 26, 29, 30], "decoder_": 5, "is_encoder_decod": 5, "possibl": 5, "greedysearchdecoderonlyoutput": 5, "sampledecoderonlyoutput": 5, "beamsearchdecoderonlyoutput": 5, "beamsampledecoderonlyoutput": 5, "greedysearchencoderdecoderoutput": 5, "sampleencoderdecoderoutput": 5, "beamsearchencoderdecoderoutput": 5, "beamsampleencoderdecoderoutput": 5, "context_mask": 5, "aggreg": 5, "scalar": 5, "per": 5, "passag": [5, 16, 18, 26, 27, 28, 29, 30, 31, 32, 33, 34, 37, 38], "seen": 5, "similar": [5, 6, 23, 33], "first": [5, 7, 11, 12, 17, 20, 24, 25, 37, 38], "distil": [5, 26, 31], "knowledg": [5, 33], "reader": [5, 33], "2012": 5, "04584": 5, "state_dict": 5, "save": [5, 9, 14, 16, 17, 18, 19, 20, 21, 24, 25, 27, 28, 29, 30, 31, 32, 33, 34, 37, 38], "storag": [5, 16], "enabl": [5, 15, 16, 37, 38], "disabl": 5, "pytorch": 5, "stabl": 5, "html": [5, 14, 18, 37], "unwrap": 5, "wrap": 5, "t5stack": 5, "key_value_st": 5, "layer_head_mask": 5, "query_length": 5, "work": [5, 11, 12, 15, 18, 25, 37, 38], "model_init_kwarg": 5, "now": [5, 14, 37, 38], "we": [5, 11, 12, 14, 15, 17, 18, 19, 20, 21, 22, 23, 26, 27, 28, 29, 30, 31, 32, 33, 34, 37, 38], "support": [5, 15, 16, 18, 22, 23, 28, 30, 37, 38], "architectur": [5, 28], "batch_q_w_passag": 5, "batched_fid_prompt": 5, "simpli": [5, 16, 17, 20, 21, 24, 25, 27, 29, 30, 32, 33, 34, 37, 38], "url": [5, 7, 14, 16, 17, 18, 23, 25], "timeout": 5, "60": 5, "input_text": [5, 8], "generate_kwarg": 5, "input_kwarg": 5, "hood": [5, 20, 28, 29, 30, 32, 33, 34, 37, 38], "its": [5, 7, 17, 19, 37, 38], "relev": [6, 7, 31], "corpu": 6, "queri": [6, 12, 27, 31], "handl": [6, 25], "mock": 6, "test": [6, 15, 18, 19, 20, 21, 22, 23, 24, 25, 28, 29, 30, 32, 33, 34, 37, 38], "disk": 6, "folder": [6, 14, 20, 21, 25, 37, 38], "path": [6, 10, 14, 17, 20, 21, 23, 28, 29, 30, 32, 33, 34], "valueerror": [6, 9], "cannot": 6, "faiss": [6, 22, 23], "langchain": [6, 7, 9, 14, 16, 18, 37, 38], "would": [6, 16, 21, 37, 38], "recogn": [6, 25], "emb": [6, 12, 16, 17], "our": [6, 7, 12, 15, 18, 19, 20, 21, 23, 24, 26, 27, 28, 29, 30, 31, 32, 33, 34, 37, 38], "langchaindocu": 6, "_summary_": 6, "search_typ": 6, "factori": [7, 8, 11, 12], "speak": 7, "system_messag": 7, "add": 7, "user_messag": 7, "dialogue_list": 7, "dictionari": [7, 11, 12, 16], "string": 7, "store": [7, 16, 18], "mai": [7, 16, 19, 23, 37, 38], "later": 7, "dialogue_turn_dict": 7, "separ": [7, 14], "style": 7, "chunk": [7, 9, 14, 18], "along": 7, "titl": [7, 12, 16, 17, 18, 33], "author": [7, 16], "document_dict": 7, "field": [7, 16, 17, 26], "controller_addr": 8, "worker_addr": 8, "worker_id": 8, "model_path": 8, "limit_worker_concurr": 8, "conv_templ": 8, "param": 8, "async": 8, "request": [8, 25, 37, 38], "obj": 8, "manag": [8, 25, 37, 38], "distribut": [8, 26, 31], "worker": [8, 25, 37, 38], "send": [8, 25], "address": [8, 23], "client": 8, "dispatch_method": 8, "worker_nam": 8, "worker_address": 8, "worker_statu": 8, "data_file_path": 8, "empty_sess": 8, "annotation_kei": 8, "data_indic": 8, "_session": 8, "_tmp_data": 8, "keep": [8, 37, 38], "convers": [8, 29, 30], "gradio": [8, 37, 38], "either": [8, 16, 17, 20, 21], "NOT": 8, "framework": [8, 14, 15, 18, 19, 20, 25], "local": [8, 15, 38], "just": [8, 15, 16, 37, 38], "implement": [8, 14, 19, 26, 28, 29, 30, 31, 32, 33, 34], "embed_mod": 8, "idx": 8, "dummy_st": 8, "url_param": 8, "chatbot": [8, 16, 20], "submit_btn": 8, "radio_choic": 8, "temperatur": [8, 10, 12, 34, 38], "top_p": 8, "violat": 8, "moder": 8, "vote_typ": 8, "execut": 8, "no_regist": 8, "devic": [8, 12], "cuda": [8, 12], "load_8bit": 8, "load_4bit": 8, "stream_interv": 8, "embed_in_trunc": 8, "seed": [8, 10, 11, 12, 37, 38], "debug": [8, 11, 12], "parser": 8, "device_map": 8, "auto": [8, 11, 12], "pickl": 9, "save_fold": [9, 14, 37, 38], "data": [9, 12, 14, 15, 19, 20, 21, 24, 26, 27, 28, 30, 31, 32, 33, 34], "save_filenam": [9, 14, 37, 38], "parsed_doc": 9, "loader_func": [9, 14, 37, 38], "document_load": [9, 14, 37, 38], "directori": [9, 17, 18, 24, 25, 27, 28, 29, 30, 31, 32, 33, 34, 37], "directoryload": 9, "splitter_func": [9, 14, 37, 38], "text_splitt": [9, 14, 37, 38], "charactertextsplitt": [9, 14], "specifi": [9, 14, 17, 20, 21, 27, 31], "loader_param": [9, 14, 37, 38], "splitter_param": [9, 14, 37, 38], "loader_funct": 9, "splitter_funct": 9, "split": [9, 18, 37, 38], "simpledirectoryread": 9, "e2eqatrainingargu": [10, 11], "do_ev": [10, 11, 12], "do_train": [10, 11, 12], "eval_step": [10, 11, 12, 37, 38], "evaluation_strategi": [10, 11, 12, 26], "learning_r": [10, 11, 12, 31, 32, 33, 37, 38], "load_best_model_at_end": [10, 11, 12], "logging_step": [10, 11, 12, 37, 38], "lr_scheduler_typ": [10, 11, 12], "metric_for_best_model": [10, 11, 12, 31, 32, 33, 34, 38], "num_train_epoch": [10, 11, 12, 37, 38], "per_device_eval_batch_s": [10, 11, 12, 27, 28, 29, 30, 31, 32, 33, 34, 37, 38], "remove_unused_column": [10, 11, 12], "report_to": [10, 11, 12], "save_step": [10, 11, 12, 37, 38], "save_strategi": [10, 11, 12], "save_total_limit": [10, 11, 12], "warmup_ratio": [10, 11, 12], "weight_decai": [10, 11, 12], "retrievalqatrainingargu": [10, 11, 12], "documents_path": [10, 11], "eval_data_path": [10, 11, 19, 20, 21, 23, 37, 38], "write_predict": [10, 11, 12], "noopdatacol": [10, 11, 12], "supervisedfidrqawretrieverdataset": [10, 11], "encode_data": [10, 11], "pre_retrieve_all_doc": [10, 11], "prepare_data": [10, 11, 12], "supervisedrqadataset": [10, 11], "supervisedrqawretrieverdataset": [10, 11], "batch_iter": [10, 11, 12], "retriever_init": [10, 11], "supervisedfidtrain": [10, 11], "compute_loss": [10, 11, 12], "evaluation_loop": [10, 11, 12], "prediction_step": [10, 11, 12], "wrap_model_for_ev": [10, 11, 12], "supervisedtrain": [10, 11], "contrasitivetrainingarg": [10, 12], "contrastive_loss": [10, 12, 31, 32], "hard_neg_ratio": [10, 12, 31, 32, 38], "dataargu": [10, 12], "eval_fil": [10, 12, 27, 28, 29, 30, 31, 32, 33, 34, 37, 38], "full_dataset_file_path": [10, 12, 27, 28, 29, 30, 31, 32, 33, 34, 37, 38], "test_fil": [10, 12, 27, 28, 29, 30, 37, 38], "train_fil": [10, 12, 27, 28, 29, 30, 31, 32, 33, 34, 37, 38], "fidtrainingarg": [10, 12], "apply_passage_mask": [10, 12], "apply_question_mask": [10, 12], "extract_cl": [10, 12], "indexing_dimens": [10, 12], "n_context": [10, 12, 33], "project": [10, 12, 24, 25, 33], "reader_batch_s": [10, 12, 33], "reader_model_path": [10, 12, 33], "reader_temperatur": [10, 12, 33], "text_maxlength": [10, 12, 34], "with_scor": [10, 12, 33], "loggerargu": [10, 12], "run_ent": [10, 12], "run_group": [10, 12, 37, 38], "run_project": [10, 12], "modelargu": [10, 12, 20, 21], "replugtrainingarg": [10, 12], "lm_model_path": [10, 12, 34], "lm_temperatur": [10, 12, 34], "num_doc": [10, 12, 34], "refresh_step": [10, 12, 34], "retrieve_temperatur": [10, 12, 34], "gradient_checkpoint": [10, 11, 12], "max_step": [10, 11, 12, 38], "output_dir": [10, 11, 12, 19, 20, 21, 23, 27, 28, 29, 30, 31, 32, 33, 34, 37, 38], "per_device_train_batch_s": [10, 11, 12, 27, 28, 29, 30, 31, 32, 33, 34, 37, 38], "pooling_typ": [10, 12, 31, 32, 34, 38], "contrastiveretrievaldataset": [10, 12], "fidcol": [10, 12], "fiddataset": [10, 12], "get_exampl": [10, 12], "get_target": [10, 12], "sort_data": [10, 12], "replugdataset": [10, 12], "retrievercol": [10, 12], "encode_passag": [10, 12], "load_fid_data": [10, 12], "localembed": [10, 12], "embed_docu": [10, 12], "embed_queri": [10, 12], "compute_embed": [10, 12], "embed_document_batch": [10, 12], "mean_pool": [10, 12], "fidretrievertrain": [10, 12], "embed_text": [10, 12], "kldivloss": [10, 12], "replugretrievertrain": [10, 12], "get_seq_prob": [10, 12], "instruct": [10, 12, 26, 27, 29, 30, 37], "retrievertrain": [10, 12], "save_dir": [10, 18, 37, 38], "overwrite_output_dir": [11, 12], "do_predict": [11, 12], "prediction_loss_onli": [11, 12], "8": [11, 12], "per_gpu_train_batch_s": [11, 12], "per_gpu_eval_batch_s": [11, 12], "gradient_accumulation_step": [11, 12, 37, 38], "eval_accumulation_step": [11, 12], "eval_delai": [11, 12], "float": [11, 12, 33], "1e": [11, 12, 31, 32, 33, 38], "05": [11, 12, 31, 32, 38], "01": [11, 12], "adam_beta1": [11, 12], "9": [11, 12], "adam_beta2": [11, 12], "999": [11, 12], "adam_epsilon": [11, 12], "08": [11, 12], "max_grad_norm": [11, 12], "cosin": [11, 12], "lr_scheduler_kwarg": [10, 11, 12], "warmup_step": [11, 12], "log_level": [11, 12], "passiv": [11, 12], "log_level_replica": [11, 12], "log_on_each_nod": [11, 12], "logging_dir": [11, 12], "logging_strategi": [11, 12], "trainer_util": [11, 12], "intervalstrategi": [11, 12], "logging_first_step": [11, 12], "10": [11, 12, 33, 34, 37, 38], "logging_nan_inf_filt": [11, 12], "save_safetensor": [11, 12], "save_on_each_nod": [11, 12], "save_only_model": [11, 12], "no_cuda": [11, 12], "use_cpu": [11, 12], "use_mps_devic": [11, 12], "42": [11, 12], "data_se": [11, 12], "jit_mode_ev": [11, 12], "use_ipex": [11, 12], "bf16": [11, 12, 37, 38], "fp16": [11, 12], "fp16_opt_level": [11, 12], "o1": [11, 12], "half_precision_backend": [11, 12], "bf16_full_ev": [11, 12], "fp16_full_ev": [11, 12], "tf32": [11, 12], "local_rank": [11, 12], "ddp_backend": [11, 12], "tpu_num_cor": [11, 12], "tpu_metrics_debug": [11, 12], "debug_util": [11, 12], "debugopt": [11, 12], "dataloader_drop_last": [11, 12], "dataloader_num_work": [11, 12], "past_index": [11, 12], "run_nam": [11, 12], "disable_tqdm": [11, 12], "label_nam": [11, 12], "eval_loss": [11, 12], "greater_is_bett": [11, 12], "ignore_data_skip": [11, 12], "fsdp": [11, 12], "fsdpoption": [11, 12], "fsdp_min_num_param": [11, 12], "fsdp_config": [11, 12], "fsdp_transformer_layer_cls_to_wrap": [11, 12], "label_smoothing_factor": [11, 12], "optim": [11, 12], "training_arg": [11, 12], "optimizernam": [11, 12], "adamw_torch": [11, 12], "optim_arg": [11, 12], "adafactor": [11, 12], "group_by_length": [11, 12], "length_column_nam": [11, 12], "wandb": [11, 12, 37, 38], "ddp_find_unused_paramet": [11, 12], "ddp_bucket_cap_mb": [11, 12], "ddp_broadcast_buff": [11, 12], "dataloader_pin_memori": [11, 12], "dataloader_persistent_work": [11, 12], "skip_memory_metr": [11, 12], "use_legacy_prediction_loop": [11, 12], "push_to_hub": [11, 12], "resume_from_checkpoint": [11, 12], "hub_model_id": [11, 12], "hub_strategi": [11, 12], "hubstrategi": [11, 12], "every_sav": [11, 12], "hub_token": [11, 12], "hub_private_repo": [11, 12], "hub_always_push": [11, 12], "gradient_checkpointing_kwarg": [11, 12], "include_inputs_for_metr": [11, 12], "fp16_backend": [11, 12], "push_to_hub_model_id": [11, 12], "push_to_hub_organ": [11, 12], "push_to_hub_token": [11, 12], "mp_paramet": [11, 12], "auto_find_batch_s": [11, 12], "full_determin": [11, 12], "torchdynamo": [11, 12], "ray_scop": [11, 12], "ddp_timeout": [11, 12], "1800": [11, 12], "torch_compil": [11, 12], "torch_compile_backend": [11, 12], "torch_compile_mod": [11, 12], "dispatch_batch": [11, 12], "split_batch": [11, 12], "include_tokens_per_second": [11, 12], "include_num_input_tokens_seen": [11, 12], "neftune_noise_alpha": [11, 12], "trainingargu": [11, 12, 28, 29, 30, 32, 33, 34], "union": [11, 12], "5e": [11, 37, 38], "schedulertyp": 11, "linear": 11, "500": 11, "nonetyp": 11, "qa_w_doc_data": 11, "embedding_model": [11, 28, 30], "huggingfaceembed": 11, "openaiembed": 11, "retriever_init_fn": 11, "max_num_to_retriev": 11, "encoder_max_length": 11, "512": [11, 12, 34], "decoder_max_length": 11, "256": [11, 12, 31, 32, 38], "start_data_idx": [11, 12], "end_data_idx": [11, 12, 18, 37, 38], "shuffl": [11, 12], "fix": 11, "encoder_text_data": 11, "decoder_text_data": 11, "q_w_passag": 11, "all_quest": 11, "650": 11, "text_data": 11, "2048": 11, "dset": [11, 12], "drop_last": [11, 12], "embeddings_model": 11, "train_index_path": 11, "train_arg": 11, "eval_config": [11, 12, 20, 21], "eval_retriev": 11, "data_col": [11, 12], "datacol": [11, 12], "train_dataset": [11, 12, 37, 38], "eval_dataset": [11, 12, 37, 38], "pretrainedtokenizerbas": [11, 12], "model_init": [11, 12], "compute_metr": [11, 12], "evalpredict": [11, 12], "callback": [11, 12], "trainercallback": [11, 12], "lambdalr": [11, 12], "preprocess_logits_for_metr": [11, 12], "equival": 11, "includ": [11, 19, 23, 37], "gold": [11, 17, 26, 27, 32, 34, 37, 38], "choic": [11, 23, 25], "return_output": [11, 12], "By": [11, 12, 18, 20, 21, 23, 37, 38], "dataload": [11, 12], "descript": [11, 12, 37], "ignore_kei": [11, 12], "metric_key_prefix": [11, 12], "evalloopoutput": [11, 12], "share": [11, 12, 37, 38], "without": [11, 12], "inject": [11, 12], "nn": [11, 12], "target": [11, 12, 26], "unpack": [11, 12], "being": [11, 12], "fed": [11, 12], "expect": [11, 12], "accept": [11, 12, 23], "gather": [11, 12, 29, 30, 32, 33, 34], "inbatch_contrast": [12, 31, 32], "databricks_new": 12, "train_w_qa": [12, 17, 18, 27, 28, 29, 30, 34, 37, 38], "jsonl": [12, 17, 18, 19, 20, 21, 23, 24, 27, 28, 29, 30, 31, 32, 34, 37, 38], "eval_w_qa": [12, 17, 18, 27, 28, 29, 30, 34, 37, 38], "test_w_qa": [12, 17, 18, 19, 20, 23, 27, 28, 29, 30, 37, 38], "databas": [12, 14, 16, 18, 19, 20, 21, 25, 27, 37, 38], "databrick": [12, 14, 16, 18, 28, 29, 30, 32, 34], "databricks_400": 12, "pkl": [12, 14, 17, 18, 19, 20, 21, 23, 25, 27, 28, 29, 30, 31, 32, 33, 34, 37, 38], "pertain": 12, "go": [12, 25, 37, 38], "googl": [12, 14, 16, 18, 33], "flan": [12, 33], "xl": [12, 33], "50": [12, 14, 18, 24, 33, 37, 38], "768": 12, "localrqa": [12, 13, 14, 16, 17, 18, 19, 22, 31, 37, 38], "log": [12, 20, 21, 24, 25, 37, 38], "facebook": [12, 18, 33, 34, 37, 38], "contriev": [12, 18, 33, 34, 37, 38], "msmarco": [12, 18, 33, 34, 37, 38], "stabilityai": [12, 34], "stablelm": [12, 34], "zephyr": [12, 34], "3b": [12, 28, 34], "20": [12, 25, 34], "result": [12, 19, 20, 21, 24, 27, 28, 29, 30, 31, 32, 33, 34, 37, 38], "model_checkpoint": [12, 27, 28, 29, 30, 31, 32, 33, 34], "contriever_contrastive_ft": 12, "200": 12, "raw_data": 12, "document_fmt_str": 12, "answer_maxlength": 12, "score_kei": 12, "question_prefix": 12, "title_prefix": 12, "passage_prefix": 12, "context": [12, 16, 23, 24], "passage_maxlength": 12, "question_maxlength": 12, "batch_text_passag": 12, "data_path": 12, "encoded_input": 12, "token_embed": 12, "data_arg": 12, "fid_arg": 12, "text_id": 12, "text_mask": 12, "apply_mask": 12, "gold_scor": 12, "replug_arg": 12, "pred": 12, "logit_scor": 12, "label_str": 12, "retrieve_scor": 12, "lm_score": 12, "contrastive_arg": 12, "repo": [], "setup": [37, 38], "docker": [], "virtual": [], "requir": [16, 28, 29, 30, 32, 33, 34, 37, 38], "txt": [], "pip": 13, "r": [], "In": [14, 16, 17, 18, 20, 21, 24, 25, 28, 29, 30, 32, 33, 34, 37, 38], "show": [14, 18, 26], "quickli": [14, 15], "full": [14, 16, 28, 29, 30, 32, 33, 34], "found": [14, 37], "demo": 14, "py": [14, 18, 19, 20, 21, 23, 24, 25, 27, 28, 29, 30, 31, 32, 33, 34, 37, 38], "script": [14, 18, 19, 20, 21, 23, 24, 26, 27, 28, 29, 30, 31, 32, 33, 34, 37, 38], "root": [14, 24, 25], "repositori": 14, "integr": [14, 18, 22], "llamaindex": [14, 18], "easili": [14, 15, 18, 23], "ingest": [14, 18], "drive": [14, 16, 18], "could": [14, 37, 38], "websit": [14, 16, 18, 37, 38], "seleniumurlload": 14, "pars": [14, 18], "collect": [14, 15, 16, 18, 22, 25, 26, 31, 38], "langchain_commun": 14, "local_rqa": [14, 17, 20, 21, 23, 24, 25, 37, 38], "split_func": 14, "loader_paramet": [14, 37, 38], "en": [14, 38], "dbf": [14, 17, 25, 37], "splitter_paramet": [14, 37, 38], "chunk_siz": [14, 18, 37, 38], "400": [14, 18, 37, 38], "chunk_overlap": [14, 37, 38], "n": [14, 16, 17, 18], "abov": [14, 16, 17, 22, 23, 24, 25, 27, 31, 37, 38], "plugin": 14, "intfloat": [14, 19, 20, 21, 23, 25, 26, 27, 28, 29, 30, 31, 32], "e5": [14, 19, 20, 21, 23, 25, 26, 27, 28, 29, 30, 31, 32, 37], "v2": [14, 19, 20, 21, 23, 25, 26, 27, 28, 29, 30, 31, 32], "stand": [14, 26], "where": [14, 17, 18, 26, 28, 29, 30, 32, 33, 34, 37, 38], "beyond": [14, 16, 37, 38], "algorithm": [14, 15, 16, 18, 26, 27, 31, 37, 38], "latest": [14, 15, 26, 27], "research": [14, 15, 16, 18, 26, 27], "automat": [14, 15, 16, 17, 19, 20, 21, 24, 27, 28, 29, 30, 31], "deploi": [14, 15, 16, 22], "interact": [14, 15, 22, 23, 37, 38], "real": [14, 15, 21, 24, 25], "excit": [], "here": [18, 33, 37, 38], "let": [], "surround": [], "line": [16, 17, 27, 31], "item": [], "nest": 38, "open": [15, 20, 25, 26, 28, 37], "toolkit": 15, "augment": [15, 24, 28, 30, 34], "suit": 15, "tool": 15, "compar": [15, 19], "wide": [], "curat": [15, 27, 38], "page": [15, 16, 18, 20, 24, 25], "explain": [], "high": [16, 18, 23, 24, 25, 27, 28, 29, 30, 31, 32, 33, 34], "level": [16, 18, 24, 25, 27, 28, 29, 30, 31, 32, 33, 34], "kind": 16, "briefli": [], "point": [25, 32], "subpag": [], "case": [16, 17, 19, 25], "standard": [16, 28, 29, 30, 32], "workflow": 16, "deploy": 16, "act": 16, "triplet": [16, 18, 37, 38], "color": 16, "blue": 16, "simplifi": 16, "like": [16, 17, 28, 29, 30, 32, 34, 37, 38], "access": [16, 37, 38], "people10m": 16, "tabl": 16, "nenabl": 16, "permiss": 16, "new": [15, 16, 17, 34], "workspac": 16, "februari": 16, "28": 16, "2023": [16, 20, 34], "adls2": 16, "uc": 16, "extern": 16, "locat": 16, "azur": 16, "lake": [16, 37], "gen2": 16, "uniti": 16, "catalog": 16, "wish": [16, 20], "mention": [16, 22], "section": [16, 17, 26, 27, 31], "explan": [16, 37], "typic": 16, "pair": [16, 18, 27, 28, 29, 30, 31, 32, 33, 34, 37, 38], "howev": [16, 23, 26, 37, 38], "wai": [16, 22, 38], "human": [16, 18, 20, 22, 25, 37, 38], "These": [17, 18, 20, 27, 31, 37], "doe": [24, 37, 38], "aa": [], "full_dataset_index_path": [17, 27, 28, 29, 30, 37, 38], "get": [], "raw": [16, 37, 38], "academ": [], "mani": [16, 18, 19, 23], "help": [15, 18, 19, 22, 27, 38], "measur": [18, 19, 20, 21, 37, 38], "find": [19, 37, 38], "cost": [19, 37, 38], "effect": [15, 19, 27, 29], "suitabl": 19, "applic": [19, 21], "test_retriev": [19, 21], "dir": [19, 20, 21, 23, 37, 38], "read": [16, 18, 19, 24, 25, 37, 38], "test_e2": [19, 20, 23, 37, 38], "design": [15, 19], "machin": [16, 18, 19, 20], "larg": [16, 18, 19, 20, 23], "multi": [19, 20, 25, 26], "endpoint": [19, 20], "k": [20, 21, 27, 28, 30, 31, 34], "runtim": [20, 21], "often": [20, 21, 26, 33, 34], "task": [20, 26, 29, 33], "translat": 20, "recent": [15, 20], "qualiti": [20, 22, 24, 25], "liu": [16, 18, 20], "et": [16, 18, 20, 21, 26, 33], "al": [16, 18, 20, 21, 26, 33], "zheng": 20, "compat": [20, 21, 28, 29, 30, 32, 33, 34], "all_arg": [20, 21], "export": [20, 23, 25], "openai_api_kei": 20, "xxx": [17, 20, 24, 37, 38], "openai_organ": 20, "Then": [18, 20, 24, 25, 37, 38], "avail": [17, 20], "h": [18, 20, 26, 28, 29, 30, 32, 33, 34], "modifi": [20, 21, 37, 38], "procedur": [20, 21, 23], "def": [20, 21, 37, 38], "model_arg": [20, 21], "test_arg": [20, 21], "testargu": [20, 21], "init": [20, 21], "rqa_model": 20, "init_rqa_model": 20, "loaded_eval_data": [20, 21], "load_eval_data": [20, 21], "omit": [20, 21, 27, 28, 29, 30, 37, 38], "even": [20, 21], "yang": [20, 26], "dan": 20, "yichong": 20, "xu": 20, "shuohang": 20, "wang": [16, 18, 20, 26], "ruochen": 20, "chenguang": 20, "zhu": 20, "nlg": 20, "better": [20, 21, 26, 27], "align": 20, "proceed": [16, 18, 20], "confer": [20, 21], "empir": 20, "natur": [16, 18, 20, 25], "2511": 20, "2522": 20, "singapor": 20, "linguist": [16, 18, 20], "lianmin": 20, "wei": [16, 18, 20, 26], "lin": 20, "chiang": 20, "ying": 20, "sheng": 20, "siyuan": 20, "zhuang": 20, "zhanghao": 20, "wu": [20, 26], "yonghao": 20, "zi": 20, "zhuohan": 20, "li": [16, 18, 20], "dacheng": 20, "eric": 20, "p": [20, 26, 28, 31, 33], "xing": 20, "hao": 20, "zhang": 20, "joseph": 20, "gonzalez": 20, "ion": 20, "stoica": [16, 18, 20], "2023a": 20, "mt": 20, "bench": 20, "arena": 20, "ndcg": 21, "inform": [16, 21, 26, 33, 37], "benchmark": [16, 18, 21], "beir": 21, "thakuret": 21, "2021": [21, 26], "mteb": 21, "muennighoff": 21, "2022": [21, 26], "world": [15, 21, 37, 38], "test_w_q": [18, 21, 37, 38], "though": 21, "sentencetransform": 21, "becaus": [16, 21, 25, 27], "pool": 21, "final": [16, 21, 25, 37, 38], "retriever_model": 21, "init_retriever_model": 21, "nandan": 21, "thakur": 21, "nil": 21, "reimer": 21, "andrea": 21, "r\u00fcckl\u00e9": 21, "abhishek": 21, "srivastava": 21, "iryna": 21, "gurevych": 21, "heterogen": 21, "shot": 21, "thirti": 21, "fifth": 21, "neural": [17, 21], "track": 21, "round": 21, "nikla": 21, "nouaman": 21, "tazi": 21, "lo\u00efc": 21, "magn": 21, "massiv": 21, "preprint": 21, "2210": 21, "07316": 21, "backend": 22, "launch": [15, 22, 24, 25, 37, 38], "ui": [15, 22], "free": [22, 37, 38], "chat": [15, 17, 22, 23, 26, 27, 28, 37, 38], "showcas": 22, "public": 22, "feedback": [15, 22, 25, 37, 38], "improv": [15, 22, 27, 37, 38], "techniqu": [15, 22], "rlhf": 22, "rate": 22, "correct": [17, 22, 38], "sever": [22, 27], "johnson": [], "2019": [16, 18], "kwon": [], "reduc": 23, "quickstart": [15, 18, 23, 25], "drop": 23, "m": [16, 18, 23, 25], "api_serv": [23, 25], "localhost": [23, 25, 37, 38], "8000": [23, 25], "launch_serv": 23, "port": [23, 24, 25, 37, 38], "30000": 23, "3000": 23, "cuda_visible_devic": [23, 25], "model_id": [23, 25, 37, 38], "simple_rqa": [23, 25, 37, 38], "analysi": 24, "At": [16, 24, 25, 27, 28, 29, 30, 31, 32, 33, 34], "perpar": 24, "produc": [24, 27], "web": [24, 25, 37, 38], "server": [16, 24, 25, 37, 38], "gen_answ": 24, "respect": [24, 27, 31, 37, 38], "do": [17, 24, 25, 37, 38], "generated_answ": 24, "altern": [15, 16, 24, 37, 38], "manual": [17, 24, 37, 38], "open_rqa": 24, "file_path": [24, 37, 38], "e2": [24, 27, 28, 29, 30, 37, 38], "include_idx": [24, 37, 38], "displai": [24, 37, 38], "7861": [24, 37, 38], "onc": [24, 29, 30, 32, 33, 34], "complet": [16, 24, 28, 29, 30, 32, 34], "click": 24, "submit": 24, "annot": [24, 25], "yy": 24, "mm": 24, "dd": 24, "hh": 24, "asynchron": [25, 37, 38], "actual": [16, 25, 37, 38], "listen": 25, "21001": 25, "automodel": 25, "quick": [25, 37, 38], "tell": 25, "me": 25, "joke": 25, "word": 25, "front": 25, "28888": [25, 37, 38], "invalid_array_index": [25, 37], "thei": [17, 25], "webpag": 25, "rest": 25, "mistralai": [26, 27, 29, 30, 37], "mistral": [26, 27, 29, 30, 37], "v0": [26, 27, 29, 30, 37], "dens": 26, "practic": [16, 17, 26, 28, 30], "finetun": [26, 27, 28, 29, 30, 31, 32, 33, 34, 37, 38], "lead": 26, "karpukhin": 26, "2020": [26, 28], "izacard": [26, 28, 33], "non": [26, 38], "exhaust": 26, "grow": 26, "come": [16, 26], "interfac": 26, "ctl": [17, 26, 31, 37, 38], "q": [26, 31, 33, 37, 38], "hard": [17, 26, 31, 32, 37, 38], "contrast": [17, 26, 31, 38], "learn": [17, 26, 31, 33, 37, 38], "dca": [26, 31], "rpg": [26, 31], "lm": [26, 31, 38], "probabl": [26, 31], "sft": [26, 27, 37, 38], "swr": [26, 27, 28], "frozen": [26, 27, 28], "librari": 26, "familiar": 26, "unexpect": 26, "suggest": 26, "vladimir": 26, "barla": 26, "o": 26, "guz": 26, "sewon": [26, 34], "min": [26, 34], "patrick": 26, "lewi": [26, 34], "ledel": 26, "sergei": 26, "edunov": 26, "danqi": 26, "chen": 26, "wen": [26, 34], "tau": [26, 34], "yih": [26, 34], "domain": [26, 28, 37], "gautier": [26, 28, 33], "mathild": 26, "caron": 26, "luca": 26, "hosseini": 26, "sebastian": 26, "riedel": 26, "piotr": 26, "bojanowski": 26, "armand": 26, "joulin": 26, "edouard": [26, 28, 33], "grave": [26, 28, 33], "unsupervis": [26, 33], "liang": 26, "nan": 26, "xiaolong": 26, "huang": 26, "binx": 26, "jiao": 26, "linjun": 26, "daxin": 26, "jiang": 26, "rangan": [16, 18, 26], "majumd": [16, 18, 26], "furu": 26, "weakli": 26, "supervis": [16, 18, 26, 27, 29, 34], "besid": 27, "capabl": 27, "incorpor": 27, "therebi": 27, "factual": 27, "ground": [16, 27, 28, 29, 30], "truth": [16, 27, 28, 29, 30], "readi": [27, 31], "hyperparamet": [27, 28, 29, 30, 31, 32, 34, 37, 38], "command": [16, 18, 27, 31, 37, 38], "train_w_gt": [27, 29, 37, 38], "use_flash_attent": [27, 29, 30, 37, 38], "inst": [27, 29, 37], "eval_embedding_model": [27, 28, 29, 30, 37, 38], "my_sft_qa_model": [27, 29], "valid": [18, 27, 31, 37, 38], "consol": [27, 31], "combin": [28, 30, 37], "chat_histori": [17, 28, 29, 30, 37, 38], "passage_aug": [28, 30], "retrieved_passag": [28, 30], "concaten": [28, 29, 30], "form": 28, "input_i": 28, "parallel": 28, "feed": 28, "entropi": [28, 29, 30, 32], "visual": 28, "fastchat": 28, "AND": [28, 30], "train_w_gt_fid": 28, "embedding_max_num_to_retriev": [28, 30], "my_swr_qa_model": [28, 30], "dictat": [28, 30], "bound": [28, 30], "len": [28, 30, 37, 38], "fair": [18, 28, 29, 30, 32, 34], "leverag": [18, 28, 33], "yet": 29, "adapt": 29, "toward": 29, "mimic": [29, 30], "piec": [16, 29, 30, 32, 33, 34, 37, 38], "train_w_fixed_retriev": 30, "down": 31, "train_ctl_retriev": [31, 32, 38], "train_w_q": [18, 31, 32, 37, 38], "eval_w_q": [18, 31, 32, 37, 38], "128": [31, 32, 38], "eval_retr": [31, 32, 33, 34, 38], "recall4": [31, 32, 33, 34, 38], "my_ctl_ret_model": [31, 32], "emploi": 32, "flatten": 32, "distinguish": 32, "synthet": 33, "2020a": 33, "minim": [33, 34], "kl": [33, 34], "diverg": [33, 34], "sampl": [16, 18, 33, 37, 38], "On": 33, "top": 33, "ctx": 33, "consid": [16, 33], "dpr": 33, "bm25": 33, "train_fid_retriev": 33, "train_w_q_fid": 33, "eval_w_q_fid": 33, "my_dca_ret_model": 33, "number": [18, 33, 34, 37, 38], "equal": 33, "districut": 34, "about": [16, 34, 37, 38], "shi": 34, "etal": 34, "likelihood": 34, "train_replug_retriev": 34, "my_rpg_ret_model": 34, "calcula": 34, "weijia": 34, "michihiro": 34, "yasunaga": 34, "minjoon": 34, "seo": 34, "rich": 34, "jame": 34, "mike": 34, "luke": [16, 18, 34], "zettlemoy": [16, 18, 34], "replug": 34, "black": 34, "box": [34, 38], "technic": 37, "team": 37, "11": 37, "136": 37, "maximum": [37, 38], "doc_to_q_databrick": [37, 38], "mode": [18, 37, 38], "prompt_model": [18, 37, 38], "num_hard_negs_per_doc": [18, 37, 38], "num_train_data": [18, 37, 38], "1200": 37, "small": [18, 37, 38], "num_eval_test_data": [18, 37, 38], "150": [18, 37, 38], "doc_q_to_a_databrick": 37, "1106": [18, 37, 38], "preview": [18, 37, 38], "dataset_w_q": [18, 37, 38], "previou": [17, 18, 37, 38], "save_nam": [18, 37, 38], "train_w_a": [], "eval_w_a": [], "test_w_a": [], "e5_databricks_1e4_inbatch256_temp1_hard0": [], "highest": 38, "e5_databricks_1e4_inbatch256_chunk400_fulldoc_temp1_hard0": [], "todo": [37, 38], "promis": [], "berkelei": 38, "starl": 38, "alpha": 38, "torchrun": [], "nproc_per_nod": [], "master_port": [], "20001": [], "ds_config": [37, 38], "gpt4": 38, "end_of_turn": 38, "05_retriever_train": [], "120": [], "databricks_starling7b": [], "5e6": [], "train7_e5": [], "ft": [], "databricks_vicuna": [], "databricks_400_e51e4_inbatch256_chunk400hard0": [], "05_checkpoint120": [], "acc": [], "1e5": [], "train2_e5": [], "databricks_e2e_test": [], "crawl": [], "faq": [], "remov": [], "imag": [37, 38], "hyperlink": [], "758": 38, "faire_400": [], "doc_to_q": [18, 37, 38], "600": [18, 38], "faire_new": [], "doc_q_to_a": [18, 38], "bge": 38, "bge_1e5_mean_faire_inbatch256_temp1": [], "2_hard0": [], "baai": 38, "56": [], "faire_starling7b": [], "train2_bg": [], "faire_vicuna": [], "faire_400_bge1e5_inbatch256_chunk400hard0": [], "05_checkpoint56": [], "faire_e2e_test": [], "ref": [], "again": 18, "c": [], "moedl": [], "subset": 16, "articl": [], "generati": [], "prevent": 16, "restart": [16, 17], "begin": 16, "dif": [], "itself": 16, "uniform": 16, "default_factori": 16, "u": [37, 38], "therefor": [16, 17], "contpage_content": [], "nconfigur": [], "nurl": 16, "ncontent": [16, 18], "wonder": 16, "common": [], "scratch": 16, "parsabl": [], "kwiatkowski": [16, 18], "triviaqa": [16, 18], "joshi": [16, 18], "2017": [16, 18], "marco": [16, 18], "bajaj": [16, 18], "2018": [16, 18], "om": [], "jennimaria": [16, 18], "palomaki": [16, 18], "olivia": [16, 18], "redfield": [16, 18], "michael": [16, 18], "collin": [16, 18], "ankur": [16, 18], "parikh": [16, 18], "chri": [16, 18], "alberti": [16, 18], "daniel": [16, 18], "epstein": [16, 18], "illia": [16, 18], "polosukhin": [16, 18], "jacob": [16, 18], "devlin": [16, 18], "kenton": [16, 18], "lee": [16, 18], "kristina": [16, 18], "toutanova": [16, 18], "llion": [16, 18], "jone": [16, 18], "matthew": [16, 18], "kelcei": [16, 18], "ming": [16, 18], "andrew": [16, 18], "dai": [16, 18], "jakob": [16, 18], "uszkoreit": [16, 18], "quoc": [16, 18], "le": [16, 18], "slav": [16, 18], "petrov": [16, 18], "9th": [], "joint": [], "emnlp": [], "ijcnlp": [], "4149": [], "4158": [], "hong": [], "kong": [], "china": [], "transact": [16, 18], "452": [16, 18], "466": [16, 18], "tom": [16, 18], "eunsol": [16, 18], "choi": [16, 18], "weld": [16, 18], "scale": [16, 18], "distantli": [16, 18], "challeng": [16, 18], "comprehen": [], "sion": [], "55th": [16, 18], "annual": [16, 18], "meet": [16, 18], "vol": [], "um": [], "long": [16, 18], "paper": [16, 18], "1601": [16, 18], "1611": [16, 18], "vancouv": [16, 18], "canada": [16, 18], "mandar": [16, 18], "volum": [16, 18], "comprehens": [15, 16, 18], "payal": [16, 18], "campo": [16, 18], "nick": [16, 18], "craswel": [16, 18], "deng": [16, 18], "jianfeng": [16, 18], "gao": [16, 18], "xiaodong": [16, 18], "drew": [], "mcnamara": [16, 18], "bhaskar": [16, 18], "mitra": [16, 18], "tri": [16, 18], "nguyen": [16, 18], "mir": [16, 18], "rosenberg": [16, 18], "xia": [16, 18], "song": [16, 18], "alina": [16, 18], "saurabh": [16, 18], "tiwari": [16, 18], "tong": [16, 18], "09268": [], "throughout": 17, "appear": 17, "codebas": [], "trai": [], "aaa": [], "extens": 17, "capit": [], "franc": [], "pari": [], "germani": [], "berlin": [], "itali": [], "rome": [], "spain": [], "madrid": [], "portug": [], "lisbon": [], "hard_neg_doc": [17, 37, 38], "gold_answ": [17, 37, 38], "fiel": [], "dfb": [], "f": [17, 37, 38], "df": 17, "depth": 17, "hr": [], "seem": 17, "d": [], "normal": 17, "opthi": [], "preced": 17, "retr": [], "henc": 17, "leav": 17, "trefer": [], "reformat": 17, "core": 17, "essens": 17, "insid": [17, 37, 38], "And": 17, "npy": [], "customized000d4bd3": 17, "ece0": 17, "5cf7": 17, "ad01": 17, "9e14e1d1e073": 17, "customized0010a3a4": 17, "429d": 17, "5115": 17, "90f3": 17, "d01d91a75ea1": 17, "customized00148cdd": 17, "6bc8": 17, "5c81": 17, "aabf": 17, "9db00e00e769": 17, "customized0015be6f": [], "89dd": [], "5b31": [], "a6da": [], "06759a9213c2": [], "customizedffff1e54": 17, "52af": 17, "5d1e": 17, "a1b": 17, "235cc926f21e": 17, "essenti": [17, 37, 38], "whenev": 17, "place": 17, "ask": 17, "entir": 17, "skip": 17, "delet": 17, "realli": 17, "load_hf_data": 18, "trivial_qa": 18, "trivial_qa_docu": [], "document_save_path": 18, "qa_save_path": [], "trivial_qa_qa_pair": [], "train_data_save_path": 18, "trivial_qa_sav": [], "training_data": 18, "implicitli": 18, "udner": [], "trivialqa": 18, "_w_qa": [], "effor": [], "effortlessli": 18, "marcocontain": [], "everyth": 18, "tutori": [18, 37, 38], "conduct": [], "unifi": 37, "analyt": [], "power": 38, "apach": 37, "spark": 37, "innov": [], "scienc": [], "engin": 37, "busi": 38, "cloud": 37, "origin": 37, "creator": 37, "With": [15, 37, 38], "academia": 37, "commun": [37, 38], "wa": 37, "2013": 37, "delta": 37, "mlflow": 37, "lakehous": 37, "best": [15, 37], "warehous": 37, "offer": [15, 37], "ai": 37, "visit": [37, 38], "credit": [37, 38], "www": [37, 38], "thank": 37, "onlin": 38, "wholesal": 38, "marketplac": 38, "connect": 38, "independ": 38, "retail": 38, "brand": 38, "around": 38, "aaaa": [], "ever": 38, "consum": 38, "shop": 38, "big": 38, "chain": 38, "There": 38, "million": 38, "thrive": 38, "north": 38, "america": 38, "europ": 38, "australia": 38, "alon": 38, "who": 38, "trillion": 38, "dollar": 38, "market": 38, "global": 38, "technologi": 38, "fuel": 38, "growth": 38, "entrepreneur": 38, "everywher": 38, "blablabla": 38, "kb": 37, "_": [], "product": [37, 38], "subsequ": [37, 38], "append": [], "save_docu": [], "ndescript": 37, "deleg": 37, "authent": 37, "third": 37, "parti": 37, "servic": 37, "idea": 37, "portal": 37, "center": [], "norphan": [], "gcp": [], "auth": 37, "aha": [], "salesforc": [], "usernam": [], "role": [], "sign": [], "sso": [], "nfor": [], "icon": [], "menu": [], "immedi": [], "credenti": [], "account": [], "administr": [], "md": [], "nthi": [], "nthe": [], "ngo": [], "email": [], "wait": [], "link": [37, 38], "gain": [], "nyou": [], "activ": [], "enter": [], "redirect": [], "attempt": [], "wrong": [], "resourc": [], "nanyon": [], "organ": [], "contract": [], "contact": [], "view": [], "nsupport": [], "_must": [], "you_": [], "nif": [], "n1": [], "login": [], "button": [], "upper": [], "corner": [], "home": [], "_static": [], "png": [], "browser": [37, 38], "secondari": [], "pwd": [], "timestamp": 37, "full_text": [37, 38], "guidanc": 37, "analyst": 37, "scientist": 37, "dse": [], "dml": [], "dbsql": [], "aw": [], "collabor": [], "kubernet": [], "gke": [], "ident": [], "bigqueri": [], "toctre": [], "maxdepth": [], "titlesonli": [], "caption": [], "introduct": [], "releas": [], "explor": [], "exploratori": [], "wareh": [], "sql": [], "develop": 15, "dev": [], "partner": [], "secur": [], "complianc": [], "govern": [], "archiv": [], "glob": [], "comparison": [], "try": [], "trial": [], "notebook": [], "basic": [], "etl": [], "cli": [], "doesn": 15, "documentationnn": [], "2n": [], "startednn": [], "datann": [], "nnn": [], "administrationnn": [], "1n": [], "resourcesnn": [], "comingn": [], "indexn": [], "comparisonnnn": [], "databricksnn": [], "guidesnn": [], "mdn": [], "he": [], "potwer": [], "process_doc": [18, 37, 38], "faire_tmp": [], "faire_text": [], "chunk_overlap_s": [18, 37, 38], "faire_paresed_doc": [], "done": [37, 38], "lo": [], "loader": [], "jsonload": [37, 38], "recursivecharactertextsplitt": [18, 37, 38], "from_huggingface_token": [18, 37, 38], "jq_schema": [37, 38], "content_kei": [37, 38], "json_lin": [37, 38], "metadata_func": [37, 38], "hugginfac": [37, 38], "supp": [], "databa": [], "give": [37, 38], "pasasg": [], "togeth": [37, 38], "becom": [37, 38], "peek": 37, "notic": 37, "argpars": [37, 38], "copi": [37, 38], "customiz": [37, 38], "part": [37, 38], "random": [37, 38], "init_eval_dset": [37, 38], "documents_dataset": [37, 38], "create_positive_n_negative_exampl": [37, 38], "filter_fn": [37, 38], "databricks_filter_fn": [37, 38], "logger": [37, 38], "info": [37, 38], "create_eval_dset": [37, 38], "test_dataset": [37, 38], "create_heldout_test_dset": [37, 38], "doc2q_prompt": [37, 38], "databricks_doc2q_prompt": [37, 38], "create_train_dset": [37, 38], "decid": [37, 38], "gold_passag": [], "hard_neg": [], "minimum": [], "gc": [], "straight": [], "anoth": [18, 37, 38], "satisfactori": [37, 38], "straightforward": [37, 38], "fine": [37, 38], "tune": [37, 38], "optional": [], "6": [37, 38], "30": [37, 38], "databricks_sft_mistral7b": [], "databricks_mistr": [], "a100": [37, 38], "80gb": [37, 38], "hardwar": [], "adjust": [37, 38], "gradient": [37, 38], "accumul": [37, 38], "accordingli": [], "example_wandb_run_group_nam": [37, 38], "epoch": [37, 38], "group": [], "mo": [], "traii": [], "short": 37, "git": 13, "github": 13, "sy": [], "cd": 13, "loca": [], "pip3": [], "upgrad": 13, "pep": [], "660": [], "webui": [], "jasonyux": 13, "still": [], "stan": [], "circumst": [37, 38], "swap": [37, 38], "baselin": [37, 38], "databricks_400_textada": [], "turbo_textada": [], "treat": [37, 38], "ctl_sft": [], "sat": [], "satisfi": [37, 38], "scenario": [], "nteract": [], "incur": [37, 38], "recommend": [37, 38], "complic": [37, 38], "fastapi": [], "uvicorn": [], "below": [37, 38], "databricks_400_e5": [], "lau": [], "aliv": [37, 38], "monitor": [], "cuto": [], "showroom": 38, "expertli": 38, "apparel": [], "footwear": [], "been": [], "carefulli": [], "review": [], "editori": [], "premium": [], "fashion": [], "discov": [], "thousand": [], "contemporari": [], "nhow": [], "nthere": [], "few": 38, "nhead": [], "nnavig": [], "women": [], "men": [], "nuse": [], "brows": [], "nlook": [], "tag": [], "nwe": [], "uniqu": [], "nall": [], "nqualiti": [], "fabric": [], "composit": [], "textur": [], "inclus": [], "fiber": [], "cotton": [], "silk": [], "cashmer": [], "leather": [], "nprecis": [], "fit": [], "garment": [], "tailor": [], "bodi": [], "dart": [], "seam": [], "topstitch": [], "drape": [], "movement": [], "nthought": [], "construct": [], "ensur": [], "zipper": [], "transpar": [], "manufactur": [], "8978109378459": [], "ntitl": 18, "nshowroom": [], "seq_num": 18, "subtitl": [], "expos": 38, "gmo": 38, "genet": [], "live": [], "materi": [], "alter": [], "occur": [], "mate": [], "recombin": [], "noil": [], "oil": [], "ingredi": [], "individu": [], "oili": [], "acn": [], "prone": [], "skin": [], "contribut": [], "blackhead": [], "pimpl": [], "moistur": [], "hydrat": [], "water": [], "humect": [], "nparaben": [], "paraben": [], "preserv": [], "commonli": [], "cosmet": [], "bacteria": [], "mold": [], "nphthalat": [], "phthalat": [], "chemic": [], "plastic": [], "fragranc": [], "nspf": [], "spf": [], "sun": [], "protect": [], "factor": [], "person": [], "formul": [], "harm": [], "uv": [], "radiat": [], "nsulfat": [], "sulfat": [], "surfact": [], "clean": [], "foam": [], "shampoo": [], "wash": [], "toothpast": [], "harsh": [], "dry": [], "particularli": [], "sensit": [], "gentl": [], "certain": [], "hair": [], "13462547761819": [], "beauti": [], "nnon": [], "396": [], "prefer": [], "cream": [], "essenc": [], "fluid": [], "gel": [], "milk": [], "mist": [], "sprai": [], "wipe": [], "powder": [], "serum": [], "solid": [], "bar": [], "stick": [], "roll": [], "face": [], "398": [], "perfum": [], "famili": [], "ncitru": [], "citru": [], "character": [], "fresh": [], "zesti": [], "bright": [], "scent": [], "reminisc": [], "fruit": [], "lemon": [], "orang": [], "grapefruit": [], "bergamot": [], "nearthi": [], "woodi": [], "earthi": [], "warm": [], "aroma": [], "evok": [], "smell": [], "forest": [], "earth": [], "outdoor": [], "cedarwood": [], "sandalwood": [], "patchouli": [], "vetiv": [], "oakmoss": [], "musk": [], "spice": [], "herb": [], "cinnamon": [], "clove": [], "sage": [], "nfloral": [], "floral": [], "botan": [], "flower": [], "rose": [], "jasmin": [], "lili": [], "violet": [], "nfresh": [], "crisp": [], "invigor": [], "air": [], "lime": [], "mint": [], "lavend": [], "marin": [], "green": [], "nfruiti": [], "fruiti": [], "sweet": [], "juici": [], "vibrant": [], "berri": [], "tropic": [], "raspberri": [], "strawberri": [], "peach": [], "apricot": [], "pineappl": [], "mango": [], "nminti": [], "minti": [], "refresh": [], "cool": [], "peppermint": [], "spearmint": [], "varieti": 15, "nperfum": [], "401": [], "why": [], "benefit": [], "hold": [], "payment": [], "order": [], "ship": [], "bank": [], "happen": [], "fail": [], "360052892231ntitl": [], "am": [], "pend": [], "charg": [], "nin": [], "360052892231": [], "224": [], "my": [], "card": [], "twice": [], "223": [], "fund": [], "successfulli": [], "225": [], "longer": [], "artifici": [], "manipul": [], "laboratori": [], "plant": [], "anim": [], "viru": [], "gene": [], "tradit": [], "crossbreed": [], "due": [], "environment": [], "health": [], "ethic": [], "reason": [], "believ": [], "safer": [], "less": [], "ecolog": [], "concern": [], "13462547761819ntitl": [], "tagsncont": [], "benefici": [], "breakout": [], "w": [], "ret": 38, "bge_1e5_cls_test_faire_inbatch256_chunk400_fulldoc_temp1": [], "05_train": [], "26": [], "faire_sft_starl": [], "faire_starl": [], "faire_400_bge_1e5_faire_inbatch256_chunk400_fulldoc_temp1": [], "05_ckpt26": [], "passage_sourc": 18, "passage_titl": 18, "passage_cont": 18, "present": 18, "concret": 18, "collec": [], "tion": [], "assembl": 15, "off": 15, "shelf": 15, "nativ": [], "lat": [], "est": [], "paid": [], "thatachiev": [], "highli": [], "rang": [], "gorithm": [], "ap": [], "pendix": [], "de": [], "velop": [], "approach": 15, "prior": 15, "ing": [], "triever": [], "guu": [], "2020b": [], "tem": [], "2004": [], "furthermor": [], "ment": [], "er": [], "assess": [], "formanc": [], "fer": [], "rat": [], "ca": [], "pabil": [], "reinforc": [], "ouyang": [], "experi": [], "hug": [], "gingfac": [], "2023b": [], "novel": 15, "instal": 15, "effici": 15, "autom": [], "teach": [], "understand": [], "respond": [], "analyz": [], "moreov": 15, "peopl": [], "predefin": [], "addition": [], "refin": [], "smarter": [], "friendli": [], "fast": [], "smooth": [], "enhanc": [], "summari": [], "equip": [], "pave": [], "solut": [], "retriv": 15, "popular": 15, "easier": 15, "aim": 15}, "objects": {"": [[1, 0, 0, "-", "local_rqa"]], "local_rqa": [[1, 0, 0, "-", "base"], [1, 0, 0, "-", "constants"], [2, 0, 0, "-", "evaluation"], [3, 0, 0, "-", "guardrails"], [4, 0, 0, "-", "pipelines"], [5, 0, 0, "-", "qa_llms"], [6, 0, 0, "-", "retrievers"], [7, 0, 0, "-", "schema"], [8, 0, 0, "-", "serve"], [9, 0, 0, "-", "text_loaders"], [10, 0, 0, "-", "trainers"], [1, 0, 0, "-", "utils"]], "local_rqa.base": [[1, 1, 1, "", "Component"]], "local_rqa.base.Component": [[1, 2, 1, "", "run"], [1, 3, 1, "", "run_input_keys"]], "local_rqa.constants": [[1, 1, 1, "", "AccelerationFramework"], [1, 1, 1, "", "ErrorCode"]], "local_rqa.constants.AccelerationFramework": [[1, 3, 1, "", "SGLANG"], [1, 3, 1, "", "TGI"], [1, 3, 1, "", "VLLM"]], "local_rqa.constants.ErrorCode": [[1, 3, 1, "", "CONTEXT_OVERFLOW"], [1, 3, 1, "", "CONTROLLER_NO_WORKER"], [1, 3, 1, "", "CONTROLLER_WORKER_TIMEOUT"], [1, 3, 1, "", "CUDA_OUT_OF_MEMORY"], [1, 3, 1, "", "ENGINE_OVERLOADED"], [1, 3, 1, "", "GRADIO_REQUEST_ERROR"], [1, 3, 1, "", "GRADIO_STREAM_UNKNOWN_ERROR"], [1, 3, 1, "", "INCORRECT_AUTH_KEY"], [1, 3, 1, "", "INTERNAL_ERROR"], [1, 3, 1, "", "INVALID_AUTH_KEY"], [1, 3, 1, "", "INVALID_MODEL"], [1, 3, 1, "", "NO_PERMISSION"], [1, 3, 1, "", "PARAM_OUT_OF_RANGE"], [1, 3, 1, "", "QUOTA_EXCEEDED"], [1, 3, 1, "", "RATE_LIMIT"], [1, 3, 1, "", "VALIDATION_TYPE_ERROR"]], "local_rqa.evaluation": [[2, 0, 0, "-", "evaluator"], [2, 0, 0, "-", "metrics"], [2, 0, 0, "-", "scores"], [2, 0, 0, "-", "utils"]], "local_rqa.evaluation.evaluator": [[2, 1, 1, "", "E2EEvaluator"], [2, 1, 1, "", "Evaluator"], [2, 1, 1, "", "EvaluatorConfig"], [2, 1, 1, "", "RetrieverEvaluator"]], "local_rqa.evaluation.evaluator.E2EEvaluator": [[2, 2, 1, "", "compute_performance"], [2, 2, 1, "", "evaluate"], [2, 2, 1, "", "init_metrics"], [2, 2, 1, "", "reset_all_metrics"]], "local_rqa.evaluation.evaluator.Evaluator": [[2, 2, 1, "", "evaluate"]], "local_rqa.evaluation.evaluator.EvaluatorConfig": [[2, 3, 1, "", "assistant_prefix"], [2, 3, 1, "", "batch_size"], [2, 3, 1, "", "e2e_latency"], [2, 3, 1, "", "gen_answer_stats"], [2, 3, 1, "", "gen_bleu"], [2, 3, 1, "", "gen_f1"], [2, 3, 1, "", "gen_gpt4eval"], [2, 3, 1, "", "gen_latency"], [2, 3, 1, "", "gen_precision"], [2, 3, 1, "", "gen_rouge"], [2, 3, 1, "", "retr_document_accuracy"], [2, 3, 1, "", "retr_document_recall"], [2, 3, 1, "", "retr_latency"], [2, 3, 1, "", "retr_ndcg"], [2, 3, 1, "", "sep_sys"], [2, 3, 1, "", "sep_user"], [2, 3, 1, "", "user_prefix"]], "local_rqa.evaluation.evaluator.RetrieverEvaluator": [[2, 2, 1, "", "compute_performance"], [2, 2, 1, "", "evaluate"], [2, 2, 1, "", "init_metrics"], [2, 2, 1, "", "reset_all_metrics"]], "local_rqa.evaluation.metrics": [[2, 1, 1, "", "AnswerStats"], [2, 1, 1, "", "BLEU"], [2, 1, 1, "", "DocumentAccuracy"], [2, 1, 1, "", "DocumentNDCG"], [2, 1, 1, "", "DocumentRecall"], [2, 1, 1, "", "F1"], [2, 1, 1, "", "GPT4Eval"], [2, 1, 1, "", "Latency"], [2, 1, 1, "", "MonitoringMetric"], [2, 1, 1, "", "Precision"], [2, 1, 1, "", "ROUGE"], [2, 1, 1, "", "RunningMetic"], [2, 4, 1, "", "document_similarity"], [2, 4, 1, "", "is_almost_same_document"], [2, 4, 1, "", "is_same_document"], [2, 4, 1, "", "mean"]], "local_rqa.evaluation.metrics.AnswerStats": [[2, 2, 1, "", "compute"], [2, 2, 1, "", "reset"], [2, 2, 1, "", "update"]], "local_rqa.evaluation.metrics.BLEU": [[2, 2, 1, "", "compute"], [2, 2, 1, "", "reset"], [2, 2, 1, "", "update"]], "local_rqa.evaluation.metrics.DocumentAccuracy": [[2, 2, 1, "", "compute"], [2, 2, 1, "", "reset"], [2, 2, 1, "", "update"]], "local_rqa.evaluation.metrics.DocumentNDCG": [[2, 2, 1, "", "compute"], [2, 2, 1, "", "reset"], [2, 2, 1, "", "update"]], "local_rqa.evaluation.metrics.DocumentRecall": [[2, 2, 1, "", "calculate_recall"], [2, 2, 1, "", "compute"], [2, 2, 1, "", "reset"], [2, 2, 1, "", "update"]], "local_rqa.evaluation.metrics.F1": [[2, 2, 1, "", "compute"], [2, 2, 1, "", "reset"], [2, 2, 1, "", "update"]], "local_rqa.evaluation.metrics.GPT4Eval": [[2, 2, 1, "", "compute"], [2, 2, 1, "", "judge"], [2, 2, 1, "", "reset"], [2, 2, 1, "", "update"]], "local_rqa.evaluation.metrics.Latency": [[2, 2, 1, "", "compute"], [2, 2, 1, "", "reset"], [2, 2, 1, "", "start"], [2, 2, 1, "", "stop"]], "local_rqa.evaluation.metrics.MonitoringMetric": [[2, 2, 1, "", "compute"], [2, 2, 1, "", "reset"], [2, 2, 1, "", "start"], [2, 2, 1, "", "stop"]], "local_rqa.evaluation.metrics.Precision": [[2, 2, 1, "", "compute"], [2, 2, 1, "", "reset"], [2, 2, 1, "", "update"]], "local_rqa.evaluation.metrics.ROUGE": [[2, 2, 1, "", "compute"], [2, 2, 1, "", "reset"], [2, 2, 1, "", "update"]], "local_rqa.evaluation.metrics.RunningMetic": [[2, 2, 1, "", "compute"], [2, 2, 1, "", "reset"], [2, 2, 1, "", "update"]], "local_rqa.evaluation.scores": [[2, 4, 1, "", "em"], [2, 4, 1, "", "exact_match_score"], [2, 4, 1, "", "f1"], [2, 4, 1, "", "f1_score"], [2, 4, 1, "", "precision"], [2, 4, 1, "", "recall"], [2, 4, 1, "", "rouge_score"], [2, 4, 1, "", "rouge_wrapper"]], "local_rqa.evaluation.utils": [[2, 4, 1, "", "normalize_answer"]], "local_rqa.guardrails": [[3, 0, 0, "-", "base"]], "local_rqa.guardrails.base": [[3, 1, 1, "", "BaseAnswerGuardrail"], [3, 1, 1, "", "NoopAnswerGuardrail"]], "local_rqa.guardrails.base.BaseAnswerGuardrail": [[3, 2, 1, "", "guardrail"], [3, 2, 1, "", "run"], [3, 3, 1, "", "run_input_keys"]], "local_rqa.guardrails.base.NoopAnswerGuardrail": [[3, 2, 1, "", "guardrail"]], "local_rqa.pipelines": [[4, 0, 0, "-", "base"], [4, 0, 0, "-", "prompts"], [4, 0, 0, "-", "retrieval_qa"]], "local_rqa.pipelines.base": [[4, 1, 1, "", "RQAPipeline"]], "local_rqa.pipelines.base.RQAPipeline": [[4, 2, 1, "", "components"], [4, 2, 1, "", "qa"], [4, 2, 1, "", "run"], [4, 3, 1, "", "run_input_keys"], [4, 2, 1, "", "update_dialogue_session"]], "local_rqa.pipelines.retrieval_qa": [[4, 1, 1, "", "AutoRQA"], [4, 1, 1, "", "BaseRQA"], [4, 1, 1, "", "SimpleRQA"]], "local_rqa.pipelines.retrieval_qa.SimpleRQA": [[4, 2, 1, "", "from_huggingface"], [4, 2, 1, "", "from_huggingface_fid"], [4, 2, 1, "", "from_openai"], [4, 2, 1, "", "from_scratch"], [4, 2, 1, "", "from_sglang"], [4, 2, 1, "", "from_tgi"], [4, 2, 1, "", "from_vllm"], [4, 2, 1, "", "qa"], [4, 2, 1, "", "rephrase_questions"]], "local_rqa.qa_llms": [[5, 0, 0, "-", "base"], [5, 0, 0, "-", "fid"], [5, 0, 0, "-", "huggingface"], [5, 0, 0, "-", "openai"], [5, 0, 0, "-", "prompts"], [5, 0, 0, "-", "sglang"], [5, 0, 0, "-", "tgi"], [5, 0, 0, "-", "vllm"]], "local_rqa.qa_llms.base": [[5, 1, 1, "", "BaseQAModel"], [5, 1, 1, "", "GenerationOutput"]], "local_rqa.qa_llms.base.BaseQAModel": [[5, 2, 1, "", "generate"], [5, 3, 1, "", "is_api_model"], [5, 2, 1, "", "r_generate"], [5, 2, 1, "", "run"], [5, 3, 1, "", "run_input_keys"]], "local_rqa.qa_llms.base.GenerationOutput": [[5, 3, 1, "", "batch_answers"]], "local_rqa.qa_llms.fid": [[5, 1, 1, "", "CheckpointWrapper"], [5, 1, 1, "", "EncoderWrapper"], [5, 1, 1, "", "FiDT5"], [5, 4, 1, "", "apply_checkpoint_wrapper"], [5, 4, 1, "", "cross_attention_forward"]], "local_rqa.qa_llms.fid.CheckpointWrapper": [[5, 2, 1, "", "forward"]], "local_rqa.qa_llms.fid.EncoderWrapper": [[5, 2, 1, "", "forward"]], "local_rqa.qa_llms.fid.FiDT5": [[5, 2, 1, "", "forward"], [5, 2, 1, "", "forward_"], [5, 2, 1, "", "from_t5"], [5, 2, 1, "", "generate"], [5, 2, 1, "", "get_crossattention_scores"], [5, 2, 1, "", "load_t5"], [5, 2, 1, "", "overwrite_forward_crossattention"], [5, 2, 1, "", "reset_score_storage"], [5, 2, 1, "", "set_checkpoint"], [5, 2, 1, "", "unwrap_encoder"], [5, 2, 1, "", "wrap_encoder"]], "local_rqa.qa_llms.huggingface": [[5, 1, 1, "", "HuggingFaceFiDQAModel"], [5, 1, 1, "", "HuggingFaceQAModel"]], "local_rqa.qa_llms.huggingface.HuggingFaceFiDQAModel": [[5, 2, 1, "", "encode_fid_inputs"], [5, 2, 1, "", "generate"], [5, 2, 1, "", "pack_fid_inputs"], [5, 2, 1, "", "r_generate"], [5, 2, 1, "", "unpack_fid_inputs"]], "local_rqa.qa_llms.huggingface.HuggingFaceQAModel": [[5, 2, 1, "", "generate"], [5, 2, 1, "", "r_generate"]], "local_rqa.qa_llms.openai": [[5, 1, 1, "", "OpenAIQAModel"]], "local_rqa.qa_llms.openai.OpenAIQAModel": [[5, 2, 1, "", "generate"], [5, 2, 1, "", "r_generate"]], "local_rqa.qa_llms.sglang": [[5, 1, 1, "", "SGLangClient"], [5, 1, 1, "", "SGLangQAModel"]], "local_rqa.qa_llms.sglang.SGLangClient": [[5, 2, 1, "", "generate"], [5, 2, 1, "", "generate_stream"]], "local_rqa.qa_llms.sglang.SGLangQAModel": [[5, 2, 1, "", "generate"], [5, 3, 1, "", "is_api_model"], [5, 2, 1, "", "prepare_gen_kwargs"], [5, 2, 1, "", "r_generate"]], "local_rqa.qa_llms.tgi": [[5, 1, 1, "", "TGIQAModel"]], "local_rqa.qa_llms.tgi.TGIQAModel": [[5, 2, 1, "", "generate"], [5, 3, 1, "", "is_api_model"], [5, 2, 1, "", "prepare_gen_kwargs"], [5, 2, 1, "", "r_generate"]], "local_rqa.qa_llms.vllm": [[5, 1, 1, "", "VLLMClient"], [5, 1, 1, "", "vLLMQAModel"]], "local_rqa.qa_llms.vllm.VLLMClient": [[5, 2, 1, "", "generate"], [5, 2, 1, "", "generate_stream"]], "local_rqa.qa_llms.vllm.vLLMQAModel": [[5, 2, 1, "", "generate"], [5, 3, 1, "", "is_api_model"], [5, 2, 1, "", "prepare_gen_kwargs"], [5, 2, 1, "", "r_generate"]], "local_rqa.retrievers": [[6, 0, 0, "-", "base"], [6, 0, 0, "-", "faiss_retriever"]], "local_rqa.retrievers.base": [[6, 1, 1, "", "BaseRetriever"], [6, 1, 1, "", "DummyRetriever"], [6, 1, 1, "", "RetrievalOutput"]], "local_rqa.retrievers.base.BaseRetriever": [[6, 2, 1, "", "retrieve"], [6, 2, 1, "", "run"], [6, 3, 1, "", "run_input_keys"]], "local_rqa.retrievers.base.DummyRetriever": [[6, 2, 1, "", "retrieve"]], "local_rqa.retrievers.base.RetrievalOutput": [[6, 3, 1, "", "batch_source_documents"]], "local_rqa.retrievers.faiss_retriever": [[6, 1, 1, "", "FaissRetriever"]], "local_rqa.retrievers.faiss_retriever.FaissRetriever": [[6, 2, 1, "", "from_disk"], [6, 2, 1, "", "prepare_docs_for_retrieval"], [6, 2, 1, "", "retrieve"], [6, 2, 1, "", "retrieve_w_score"]], "local_rqa.schema": [[7, 0, 0, "-", "dialogue"], [7, 0, 0, "-", "document"]], "local_rqa.schema.dialogue": [[7, 1, 1, "", "DialogueSession"], [7, 1, 1, "", "DialogueTurn"], [7, 1, 1, "", "RQAOutput"], [7, 1, 1, "", "SeparatorStyle"]], "local_rqa.schema.dialogue.DialogueSession": [[7, 2, 1, "", "add_system_message"], [7, 2, 1, "", "add_user_message"], [7, 3, 1, "", "assistant_prefix"], [7, 2, 1, "", "clone"], [7, 2, 1, "", "from_list"], [7, 3, 1, "", "history"], [7, 3, 1, "", "sep_style"], [7, 3, 1, "", "sep_sys"], [7, 3, 1, "", "sep_user"], [7, 2, 1, "", "to_list"], [7, 2, 1, "", "to_string"], [7, 3, 1, "", "user_prefix"]], "local_rqa.schema.dialogue.DialogueTurn": [[7, 2, 1, "", "clone"], [7, 2, 1, "", "from_dict"], [7, 3, 1, "", "message"], [7, 3, 1, "", "source_documents"], [7, 3, 1, "", "speaker"], [7, 2, 1, "", "to_dict"], [7, 2, 1, "", "to_string"]], "local_rqa.schema.dialogue.RQAOutput": [[7, 3, 1, "", "batch_answers"], [7, 3, 1, "", "batch_dialogue_session"], [7, 3, 1, "", "batch_source_documents"]], "local_rqa.schema.dialogue.SeparatorStyle": [[7, 3, 1, "", "SINGLE"], [7, 3, 1, "", "TWO"]], "local_rqa.schema.document": [[7, 1, 1, "", "Document"], [7, 4, 1, "", "default_document_formatter"]], "local_rqa.schema.document.Document": [[7, 2, 1, "", "clone"], [7, 3, 1, "", "fmt_content"], [7, 2, 1, "", "from_dict"], [7, 2, 1, "", "from_langchain_doc"], [7, 3, 1, "", "metadata"], [7, 3, 1, "", "page_content"], [7, 2, 1, "", "to_dict"], [7, 2, 1, "", "to_langchain_doc"]], "local_rqa.serve": [[8, 0, 0, "-", "base_model_worker"], [8, 0, 0, "-", "controller"], [8, 0, 0, "-", "gradio_dialogue"], [8, 0, 0, "-", "gradio_rqa"], [8, 0, 0, "-", "gradio_static_server"], [8, 0, 0, "-", "gradio_web_server"], [8, 0, 0, "-", "model_worker"], [8, 0, 0, "-", "test_message"]], "local_rqa.serve.base_model_worker": [[8, 1, 1, "", "BaseModelWorker"], [8, 4, 1, "", "acquire_worker_semaphore"], [8, 4, 1, "", "api_count_token"], [8, 4, 1, "", "api_generate"], [8, 4, 1, "", "api_generate_stream"], [8, 4, 1, "", "api_get_conv"], [8, 4, 1, "", "api_get_status"], [8, 4, 1, "", "api_model_details"], [8, 4, 1, "", "api_retrieval"], [8, 4, 1, "", "create_background_tasks"], [8, 4, 1, "", "heart_beat_worker"], [8, 4, 1, "", "release_worker_semaphore"]], "local_rqa.serve.base_model_worker.BaseModelWorker": [[8, 2, 1, "", "count_token"], [8, 2, 1, "", "generate_gate"], [8, 2, 1, "", "generate_stream_gate"], [8, 2, 1, "", "get_queue_length"], [8, 2, 1, "", "get_status"], [8, 2, 1, "", "init_heart_beat"], [8, 2, 1, "", "register_to_controller"], [8, 2, 1, "", "retrieve"], [8, 2, 1, "", "send_heart_beat"]], "local_rqa.serve.controller": [[8, 1, 1, "", "Controller"], [8, 1, 1, "", "DispatchMethod"], [8, 1, 1, "", "WorkerInfo"], [8, 4, 1, "", "create_controller"], [8, 4, 1, "", "get_worker_address"], [8, 4, 1, "", "heart_beat_controller"], [8, 4, 1, "", "list_models"], [8, 4, 1, "", "receive_heart_beat"], [8, 4, 1, "", "refresh_all_workers"], [8, 4, 1, "", "register_worker"], [8, 4, 1, "", "worker_api_generate_stream"], [8, 4, 1, "", "worker_api_get_status"], [8, 4, 1, "", "worker_api_retrieval"]], "local_rqa.serve.controller.Controller": [[8, 2, 1, "", "get_worker_address"], [8, 2, 1, "", "get_worker_status"], [8, 2, 1, "", "handle_no_worker"], [8, 2, 1, "", "handle_worker_timeout"], [8, 2, 1, "", "list_models"], [8, 2, 1, "", "receive_heart_beat"], [8, 2, 1, "", "refresh_all_workers"], [8, 2, 1, "", "register_worker"], [8, 2, 1, "", "remove_stale_workers_by_expiration"], [8, 2, 1, "", "remove_worker"], [8, 2, 1, "", "worker_api_generate_stream"], [8, 2, 1, "", "worker_api_get_status"], [8, 2, 1, "", "worker_api_retrieval"]], "local_rqa.serve.controller.DispatchMethod": [[8, 3, 1, "", "LOTTERY"], [8, 3, 1, "", "SHORTEST_QUEUE"], [8, 2, 1, "", "from_str"]], "local_rqa.serve.controller.WorkerInfo": [[8, 3, 1, "", "check_heart_beat"], [8, 3, 1, "", "last_heart_beat"], [8, 3, 1, "", "model_names"], [8, 3, 1, "", "queue_length"], [8, 3, 1, "", "speed"]], "local_rqa.serve.gradio_dialogue": [[8, 1, 1, "", "AnnotationHistory"], [8, 1, 1, "", "GradioDialogueSession"]], "local_rqa.serve.gradio_dialogue.AnnotationHistory": [[8, 2, 1, "", "get_current_idx"], [8, 2, 1, "", "get_current_label"], [8, 2, 1, "", "get_next_idx"], [8, 2, 1, "", "get_num_labeled"], [8, 2, 1, "", "get_num_to_label"], [8, 2, 1, "", "get_prev_idx"], [8, 2, 1, "", "is_all_labeled"], [8, 2, 1, "", "load"], [8, 2, 1, "", "parse_int_range"], [8, 2, 1, "", "to_jsonl"], [8, 2, 1, "", "update_label"]], "local_rqa.serve.gradio_dialogue.GradioDialogueSession": [[8, 2, 1, "", "add_system_message"], [8, 2, 1, "", "add_user_message"], [8, 2, 1, "", "clone"], [8, 2, 1, "", "get_prompt"], [8, 3, 1, "", "skip_next"], [8, 2, 1, "", "to_dict"], [8, 2, 1, "", "to_gradio_chatbot"]], "local_rqa.serve.gradio_rqa": [[8, 1, 1, "", "GradioRQA"], [8, 1, 1, "", "GradioSimpleRQA"]], "local_rqa.serve.gradio_rqa.GradioRQA": [[8, 2, 1, "", "generate_stream_from_api"], [8, 2, 1, "", "get_model"], [8, 2, 1, "", "get_tokenizer"], [8, 2, 1, "", "prepare_prompt_for_generation"], [8, 2, 1, "", "rephrase_question_for_retrieval"], [8, 2, 1, "", "retrieve"]], "local_rqa.serve.gradio_rqa.GradioSimpleRQA": [[8, 2, 1, "", "from_scratch"], [8, 2, 1, "", "generate_stream_from_api"], [8, 2, 1, "", "get_model"], [8, 2, 1, "", "get_tokenizer"], [8, 2, 1, "", "prepare_prompt_for_generation"], [8, 2, 1, "", "rephrase_question_for_retrieval"], [8, 2, 1, "", "retrieve"]], "local_rqa.serve.gradio_static_server": [[8, 5, 1, "", "args"], [8, 4, 1, "", "build_demo"], [8, 4, 1, "", "document_view"], [8, 4, 1, "", "get_conv_log_filename"], [8, 4, 1, "", "load_demo"], [8, 4, 1, "", "render_next_session"], [8, 4, 1, "", "render_prev_session"], [8, 4, 1, "", "render_single_session"], [8, 4, 1, "", "save_annotations"], [8, 4, 1, "", "vote_correctness"], [8, 4, 1, "", "vote_harmlessness"], [8, 4, 1, "", "vote_helpfulness"], [8, 4, 1, "", "vote_response"]], "local_rqa.serve.gradio_web_server": [[8, 4, 1, "", "add_text"], [8, 5, 1, "", "args"], [8, 4, 1, "", "build_demo"], [8, 4, 1, "", "clear_history"], [8, 4, 1, "", "document_view"], [8, 4, 1, "", "downvote_last_response"], [8, 4, 1, "", "flag_last_response"], [8, 4, 1, "", "get_conv_log_filename"], [8, 4, 1, "", "get_model_list"], [8, 4, 1, "", "http_generate"], [8, 4, 1, "", "http_retrieve"], [8, 4, 1, "", "load_demo"], [8, 4, 1, "", "load_demo_refresh_model_list"], [8, 4, 1, "", "regenerate"], [8, 4, 1, "", "upvote_last_response"], [8, 4, 1, "", "violates_moderation"], [8, 4, 1, "", "vote_last_response"]], "local_rqa.serve.model_worker": [[8, 1, 1, "", "ModelWorker"], [8, 4, 1, "", "add_model_args"], [8, 4, 1, "", "create_model_worker"], [8, 4, 1, "", "load_model"]], "local_rqa.serve.model_worker.ModelWorker": [[8, 2, 1, "", "generate_gate"], [8, 2, 1, "", "generate_stream"], [8, 2, 1, "", "generate_stream_gate"], [8, 2, 1, "", "retrieve"]], "local_rqa.serve.test_message": [[8, 4, 1, "", "main"]], "local_rqa.text_loaders": [[9, 0, 0, "-", "base"], [9, 0, 0, "-", "langchain_text_loader"], [9, 0, 0, "-", "llamaindex_text_loader"]], "local_rqa.text_loaders.base": [[9, 1, 1, "", "BaseTextLoader"]], "local_rqa.text_loaders.base.BaseTextLoader": [[9, 2, 1, "", "load_data"], [9, 2, 1, "", "save_texts"]], "local_rqa.text_loaders.langchain_text_loader": [[9, 1, 1, "", "LangChainTextLoader"]], "local_rqa.text_loaders.langchain_text_loader.LangChainTextLoader": [[9, 2, 1, "", "load_data"], [9, 2, 1, "", "save_texts"]], "local_rqa.text_loaders.llamaindex_text_loader": [[9, 1, 1, "", "LlamaIndexTextLoader"]], "local_rqa.text_loaders.llamaindex_text_loader.LlamaIndexTextLoader": [[9, 2, 1, "", "load_data"], [9, 2, 1, "", "save_texts"]], "local_rqa.trainers": [[10, 0, 0, "-", "dist_utils"], [11, 0, 0, "-", "qa_llm"], [12, 0, 0, "-", "retriever"], [10, 0, 0, "-", "utils"]], "local_rqa.trainers.dist_utils": [[10, 4, 1, "", "barrier"], [10, 4, 1, "", "get_rank"], [10, 4, 1, "", "is_main"]], "local_rqa.trainers.qa_llm": [[11, 0, 0, "-", "arguments"], [11, 0, 0, "-", "datasets"], [11, 0, 0, "-", "supervised_fid_trainer"], [11, 0, 0, "-", "supervised_trainer"]], "local_rqa.trainers.qa_llm.arguments": [[11, 1, 1, "", "E2EQATrainingArguments"], [11, 1, 1, "", "RetrievalQATrainingArguments"]], "local_rqa.trainers.qa_llm.arguments.E2EQATrainingArguments": [[11, 3, 1, "", "do_eval"], [11, 3, 1, "", "do_train"], [11, 3, 1, "", "eval_steps"], [11, 3, 1, "", "evaluation_strategy"], [11, 3, 1, "", "learning_rate"], [11, 3, 1, "", "load_best_model_at_end"], [11, 3, 1, "", "logging_steps"], [11, 3, 1, "", "lr_scheduler_kwargs"], [11, 3, 1, "", "lr_scheduler_type"], [11, 3, 1, "", "metric_for_best_model"], [11, 3, 1, "", "num_train_epochs"], [11, 3, 1, "", "output_dir"], [11, 3, 1, "", "per_device_eval_batch_size"], [11, 3, 1, "", "remove_unused_columns"], [11, 3, 1, "", "report_to"], [11, 3, 1, "", "save_steps"], [11, 3, 1, "", "save_strategy"], [11, 3, 1, "", "save_total_limit"], [11, 3, 1, "", "seed"], [11, 3, 1, "", "warmup_ratio"], [11, 3, 1, "", "weight_decay"]], "local_rqa.trainers.qa_llm.arguments.RetrievalQATrainingArguments": [[11, 3, 1, "", "documents_path"], [11, 3, 1, "", "eval_data_path"], [11, 3, 1, "", "lr_scheduler_kwargs"], [11, 3, 1, "", "output_dir"], [11, 3, 1, "", "write_predictions"]], "local_rqa.trainers.qa_llm.datasets": [[11, 1, 1, "", "NoopDataCollator"], [11, 1, 1, "", "SupervisedFiDRQAwRetrieverDataset"], [11, 1, 1, "", "SupervisedRQADataset"], [11, 1, 1, "", "SupervisedRQAwRetrieverDataset"], [11, 4, 1, "", "batch_iterator"], [11, 4, 1, "", "retriever_init"]], "local_rqa.trainers.qa_llm.datasets.SupervisedFiDRQAwRetrieverDataset": [[11, 2, 1, "", "encode_data"], [11, 2, 1, "", "encode_fid_inputs"], [11, 2, 1, "", "pre_retrieve_all_docs"], [11, 2, 1, "", "prepare_data"]], "local_rqa.trainers.qa_llm.datasets.SupervisedRQADataset": [[11, 2, 1, "", "encode_data"], [11, 2, 1, "", "prepare_data"]], "local_rqa.trainers.qa_llm.datasets.SupervisedRQAwRetrieverDataset": [[11, 2, 1, "", "encode_data"], [11, 2, 1, "", "pre_retrieve_all_docs"], [11, 2, 1, "", "prepare_data"]], "local_rqa.trainers.qa_llm.supervised_fid_trainer": [[11, 1, 1, "", "SupervisedFiDTrainer"]], "local_rqa.trainers.qa_llm.supervised_fid_trainer.SupervisedFiDTrainer": [[11, 2, 1, "", "compute_loss"], [11, 2, 1, "", "evaluation_loop"], [11, 2, 1, "", "prediction_step"], [11, 2, 1, "", "wrap_model_for_eval"]], "local_rqa.trainers.qa_llm.supervised_trainer": [[11, 1, 1, "", "SupervisedTrainer"]], "local_rqa.trainers.qa_llm.supervised_trainer.SupervisedTrainer": [[11, 2, 1, "", "compute_loss"], [11, 2, 1, "", "evaluation_loop"], [11, 2, 1, "", "prediction_step"], [11, 2, 1, "", "wrap_model_for_eval"]], "local_rqa.trainers.retriever": [[12, 0, 0, "-", "arguments"], [12, 0, 0, "-", "datasets"], [12, 0, 0, "-", "embeddings"], [12, 0, 0, "-", "retriever_fid_trainer"], [12, 0, 0, "-", "retriever_replug_trainer"], [12, 0, 0, "-", "retriever_trainer"]], "local_rqa.trainers.retriever.arguments": [[12, 1, 1, "", "ContrasitiveTrainingArgs"], [12, 1, 1, "", "DataArguments"], [12, 1, 1, "", "FidTrainingArgs"], [12, 1, 1, "", "LoggerArguments"], [12, 1, 1, "", "ModelArguments"], [12, 1, 1, "", "ReplugTrainingArgs"], [12, 1, 1, "", "RetrievalQATrainingArguments"]], "local_rqa.trainers.retriever.arguments.ContrasitiveTrainingArgs": [[12, 3, 1, "", "contrastive_loss"], [12, 3, 1, "", "hard_neg_ratio"], [12, 3, 1, "", "temperature"]], "local_rqa.trainers.retriever.arguments.DataArguments": [[12, 3, 1, "", "eval_file"], [12, 3, 1, "", "full_dataset_file_path"], [12, 3, 1, "", "test_file"], [12, 3, 1, "", "train_file"]], "local_rqa.trainers.retriever.arguments.FidTrainingArgs": [[12, 3, 1, "", "apply_passage_mask"], [12, 3, 1, "", "apply_question_mask"], [12, 3, 1, "", "extract_cls"], [12, 3, 1, "", "indexing_dimension"], [12, 3, 1, "", "n_context"], [12, 3, 1, "", "projection"], [12, 3, 1, "", "reader_batch_size"], [12, 3, 1, "", "reader_model_path"], [12, 3, 1, "", "reader_temperature"], [12, 3, 1, "", "text_maxlength"], [12, 3, 1, "", "with_score"]], "local_rqa.trainers.retriever.arguments.LoggerArguments": [[12, 3, 1, "", "run_entity"], [12, 3, 1, "", "run_group"], [12, 3, 1, "", "run_project"]], "local_rqa.trainers.retriever.arguments.ModelArguments": [[12, 3, 1, "", "model_name_or_path"]], "local_rqa.trainers.retriever.arguments.ReplugTrainingArgs": [[12, 3, 1, "", "lm_model_path"], [12, 3, 1, "", "lm_temperature"], [12, 3, 1, "", "num_docs"], [12, 3, 1, "", "refresh_step"], [12, 3, 1, "", "retrieve_temperature"], [12, 3, 1, "", "text_maxlength"]], "local_rqa.trainers.retriever.arguments.RetrievalQATrainingArguments": [[12, 3, 1, "", "do_eval"], [12, 3, 1, "", "do_train"], [12, 3, 1, "", "eval_steps"], [12, 3, 1, "", "evaluation_strategy"], [12, 3, 1, "", "gradient_checkpointing"], [12, 3, 1, "", "learning_rate"], [12, 3, 1, "", "logging_steps"], [12, 3, 1, "", "lr_scheduler_kwargs"], [12, 3, 1, "", "lr_scheduler_type"], [12, 3, 1, "", "max_steps"], [12, 3, 1, "", "metric_for_best_model"], [12, 3, 1, "", "output_dir"], [12, 3, 1, "", "per_device_eval_batch_size"], [12, 3, 1, "", "per_device_train_batch_size"], [12, 3, 1, "", "pooling_type"], [12, 3, 1, "", "remove_unused_columns"], [12, 3, 1, "", "report_to"], [12, 3, 1, "", "save_steps"], [12, 3, 1, "", "save_strategy"], [12, 3, 1, "", "save_total_limit"], [12, 3, 1, "", "seed"], [12, 3, 1, "", "warmup_ratio"], [12, 3, 1, "", "weight_decay"], [12, 3, 1, "", "write_predictions"]], "local_rqa.trainers.retriever.datasets": [[12, 1, 1, "", "ContrastiveRetrievalDataset"], [12, 1, 1, "", "FidCollator"], [12, 1, 1, "", "FidDataset"], [12, 1, 1, "", "NoopDataCollator"], [12, 1, 1, "", "ReplugDataset"], [12, 1, 1, "", "RetrieverCollator"], [12, 4, 1, "", "encode_passages"], [12, 4, 1, "", "load_fid_data"]], "local_rqa.trainers.retriever.datasets.ContrastiveRetrievalDataset": [[12, 2, 1, "", "prepare_data"]], "local_rqa.trainers.retriever.datasets.FidDataset": [[12, 2, 1, "", "get_example"], [12, 2, 1, "", "get_target"], [12, 2, 1, "", "sort_data"]], "local_rqa.trainers.retriever.datasets.ReplugDataset": [[12, 2, 1, "", "get_target"]], "local_rqa.trainers.retriever.embeddings": [[12, 1, 1, "", "LocalEmbeddings"], [12, 4, 1, "", "batch_iterator"], [12, 4, 1, "", "compute_embedding"], [12, 4, 1, "", "embed_document_batch"], [12, 4, 1, "", "mean_pooling"]], "local_rqa.trainers.retriever.embeddings.LocalEmbeddings": [[12, 2, 1, "", "embed_documents"], [12, 2, 1, "", "embed_query"]], "local_rqa.trainers.retriever.retriever_fid_trainer": [[12, 1, 1, "", "FidRetrieverTrainer"]], "local_rqa.trainers.retriever.retriever_fid_trainer.FidRetrieverTrainer": [[12, 2, 1, "", "compute_loss"], [12, 2, 1, "", "embed_text"], [12, 2, 1, "", "evaluation_loop"], [12, 2, 1, "", "kldivloss"], [12, 2, 1, "", "prediction_step"], [12, 2, 1, "", "wrap_model_for_eval"]], "local_rqa.trainers.retriever.retriever_replug_trainer": [[12, 1, 1, "", "ReplugRetrieverTrainer"]], "local_rqa.trainers.retriever.retriever_replug_trainer.ReplugRetrieverTrainer": [[12, 2, 1, "", "compute_loss"], [12, 2, 1, "", "evaluation_loop"], [12, 2, 1, "", "get_seq_prob"], [12, 2, 1, "", "instruct"], [12, 2, 1, "", "kldivloss"], [12, 2, 1, "", "prediction_step"], [12, 2, 1, "", "wrap_model_for_eval"]], "local_rqa.trainers.retriever.retriever_trainer": [[12, 1, 1, "", "RetrieverTrainer"]], "local_rqa.trainers.retriever.retriever_trainer.RetrieverTrainer": [[12, 2, 1, "", "compute_loss"], [12, 2, 1, "", "evaluation_loop"], [12, 2, 1, "", "prediction_step"], [12, 2, 1, "", "wrap_model_for_eval"]], "local_rqa.trainers.utils": [[10, 4, 1, "", "create_dir_if_not_exists"], [10, 4, 1, "", "init_logger"], [10, 4, 1, "", "remove_optimizer_weights"]], "local_rqa.utils": [[1, 4, 1, "", "init_logger"], [1, 4, 1, "", "pretty_print_semaphore"]]}, "objtypes": {"0": "py:module", "1": "py:class", "2": "py:method", "3": "py:attribute", "4": "py:function", "5": "py:data"}, "objnames": {"0": ["py", "module", "Python module"], "1": ["py", "class", "Python class"], "2": ["py", "method", "Python method"], "3": ["py", "attribute", "Python attribute"], "4": ["py", "function", "Python function"], "5": ["py", "data", "Python data"]}, "titleterms": {"local_rqa": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12], "subpackag": [1, 10], "submodul": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12], "base": [1, 3, 4, 5, 6, 9], "modul": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12], "constant": 1, "util": [1, 2, 10], "evalu": [2, 16, 17, 19, 20, 21, 24, 37, 38], "packag": [2, 3, 4, 5, 6, 7, 8, 9], "metric": 2, "score": [2, 33], "content": [2, 3, 4, 5, 6, 7, 8, 9], "guardrail": 3, "pipelin": 4, "prompt": [4, 5], "retrieval_qa": 4, "qa_llm": [5, 11], "fid": [5, 28], "huggingfac": 5, "openai": 5, "sglang": 5, "tgi": 5, "vllm": 5, "retriev": [6, 12, 21, 30, 31, 37, 38], "bm25_retriev": 6, "faiss_retriev": 6, "schema": [7, 16], "dialogu": 7, "document": [7, 14, 15, 17, 18], "serv": [8, 16, 22, 23], "base_model_work": 8, "control": 8, "gradio_dialogu": 8, "gradio_rqa": 8, "gradio_static_serv": 8, "gradio_web_serv": 8, "model_work": 8, "test_messag": 8, "text_load": 9, "langchain_text_load": 9, "llamaindex_text_load": 9, "trainer": [10, 11, 12, 28, 29, 30, 32, 33, 34, 36], "namespac": [10, 11, 12], "dist_util": 10, "argument": [11, 12], "dataset": [11, 12, 18], "supervised_fid_train": 11, "supervised_train": 11, "with_retriever_fid_train": 11, "with_retriever_train": 11, "embed": 12, "retriever_fid_train": 12, "retriever_replug_train": 12, "retriever_train": 12, "instal": 13, "from": [18, 33, 34], "sourc": [], "quickstart": 14, "prepar": [14, 18, 37, 38], "build": 14, "an": [14, 34], "rqa": [14, 16, 17, 18, 35, 37, 38], "system": [14, 35, 37, 38], "next": 14, "step": 14, "some": [], "featur": [], "subsect": [], "welcom": 15, "localrqa": 15, "": [15, 34], "why": 15, "how": 16, "can": [], "help": [], "indic": 15, "tabl": 15, "data": [16, 17, 18, 29, 37, 38], "what": 16, "do": 16, "we": 16, "need": 16, "train": [16, 17, 26, 27, 28, 31, 37, 38], "obtain": 16, "format": [17, 37, 38], "scratch": 18, "convert": 18, "exist": 18, "end": 20, "run": [20, 21, 28, 29, 30, 32, 33, 34], "custom": [20, 21, 35, 36], "launcher": 22, "acceler": [22, 23], "framework": [22, 23], "infer": 23, "simplerqa": 23, "model": [23, 36], "static": 24, "human": 24, "interact": 25, "chat": 25, "gener": [18, 27, 37, 38], "fusion": 28, "decod": 28, "sft": [29, 30], "gold": 29, "frozen": 30, "swr": 30, "contrast": 32, "learn": 32, "ctl": 32, "distil": [33, 34], "cross": 33, "attent": 33, "dca": 33, "lm": 34, "probabl": 34, "distribut": 34, "rpg": 34, "databrick": 37, "fair": 38, "test": 17, "file": [17, 18], "databas": 17, "index": 17, "vector": 17, "automat": [37, 38], "chunk": [37, 38], "question": 18, "answer": 18, "qa": [37, 38], "deploi": [37, 38], "your": 35, "pickl": 18, "get": 15, "start": 15}, "envversion": {"sphinx.domains.c": 3, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 9, "sphinx.domains.index": 1, "sphinx.domains.javascript": 3, "sphinx.domains.math": 2, "sphinx.domains.python": 4, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx": 60}, "alltitles": {"local_rqa": [[0, "local-rqa"], [1, "module-local_rqa"]], "Subpackages": [[1, "subpackages"], [10, "subpackages"]], "Submodules": [[1, "submodules"], [2, "submodules"], [3, "submodules"], [4, "submodules"], [5, "submodules"], [7, "submodules"], [8, "submodules"], [9, "submodules"], [10, "submodules"], [12, "submodules"], [6, "submodules"], [11, "submodules"]], "local_rqa.base module": [[1, "module-local_rqa.base"]], "local_rqa.constants module": [[1, "module-local_rqa.constants"]], "local_rqa.utils module": [[1, "module-local_rqa.utils"]], "local_rqa.evaluation package": [[2, "local-rqa-evaluation-package"]], "local_rqa.evaluation.evaluator module": [[2, "module-local_rqa.evaluation.evaluator"]], "local_rqa.evaluation.metrics module": [[2, "module-local_rqa.evaluation.metrics"]], "local_rqa.evaluation.scores module": [[2, "module-local_rqa.evaluation.scores"]], "local_rqa.evaluation.utils module": [[2, "module-local_rqa.evaluation.utils"]], "Module contents": [[2, "module-local_rqa.evaluation"], [3, "module-local_rqa.guardrails"], [4, "module-local_rqa.pipelines"], [5, "module-local_rqa.qa_llms"], [7, "module-local_rqa.schema"], [8, "module-local_rqa.serve"], [9, "module-local_rqa.text_loaders"], [6, "module-local_rqa.retrievers"]], "local_rqa.guardrails package": [[3, "local-rqa-guardrails-package"]], "local_rqa.guardrails.base module": [[3, "module-local_rqa.guardrails.base"]], "local_rqa.pipelines package": [[4, "local-rqa-pipelines-package"]], "local_rqa.pipelines.base module": [[4, "module-local_rqa.pipelines.base"]], "local_rqa.pipelines.prompts module": [[4, "module-local_rqa.pipelines.prompts"]], "local_rqa.pipelines.retrieval_qa module": [[4, "module-local_rqa.pipelines.retrieval_qa"]], "local_rqa.qa_llms package": [[5, "local-rqa-qa-llms-package"]], "local_rqa.qa_llms.base module": [[5, "module-local_rqa.qa_llms.base"]], "local_rqa.qa_llms.fid module": [[5, "module-local_rqa.qa_llms.fid"]], "local_rqa.qa_llms.huggingface module": [[5, "module-local_rqa.qa_llms.huggingface"]], "local_rqa.qa_llms.openai module": [[5, "module-local_rqa.qa_llms.openai"]], "local_rqa.qa_llms.prompts module": [[5, "module-local_rqa.qa_llms.prompts"]], "local_rqa.qa_llms.sglang module": [[5, "module-local_rqa.qa_llms.sglang"]], "local_rqa.qa_llms.tgi module": [[5, "module-local_rqa.qa_llms.tgi"]], "local_rqa.qa_llms.vllm module": [[5, "module-local_rqa.qa_llms.vllm"]], "local_rqa.schema package": [[7, "local-rqa-schema-package"]], "local_rqa.schema.dialogue module": [[7, "module-local_rqa.schema.dialogue"]], "local_rqa.schema.document module": [[7, "module-local_rqa.schema.document"]], "local_rqa.serve package": [[8, "local-rqa-serve-package"]], "local_rqa.serve.base_model_worker module": [[8, "module-local_rqa.serve.base_model_worker"]], "local_rqa.serve.controller module": [[8, "module-local_rqa.serve.controller"]], "local_rqa.serve.gradio_dialogue module": [[8, "module-local_rqa.serve.gradio_dialogue"]], "local_rqa.serve.gradio_rqa module": [[8, "module-local_rqa.serve.gradio_rqa"]], "local_rqa.serve.gradio_static_server module": [[8, "module-local_rqa.serve.gradio_static_server"]], "local_rqa.serve.gradio_web_server module": [[8, "module-local_rqa.serve.gradio_web_server"]], "local_rqa.serve.model_worker module": [[8, "module-local_rqa.serve.model_worker"]], "local_rqa.serve.test_message module": [[8, "module-local_rqa.serve.test_message"]], "local_rqa.text_loaders package": [[9, "local-rqa-text-loaders-package"]], "local_rqa.text_loaders.base module": [[9, "module-local_rqa.text_loaders.base"]], "local_rqa.text_loaders.langchain_text_loader module": [[9, "module-local_rqa.text_loaders.langchain_text_loader"]], "local_rqa.text_loaders.llamaindex_text_loader module": [[9, "module-local_rqa.text_loaders.llamaindex_text_loader"]], "local_rqa.trainers namespace": [[10, "module-local_rqa.trainers"]], "local_rqa.trainers.dist_utils module": [[10, "module-local_rqa.trainers.dist_utils"]], "local_rqa.trainers.utils module": [[10, "module-local_rqa.trainers.utils"]], "local_rqa.trainers.retriever namespace": [[12, "module-local_rqa.trainers.retriever"]], "local_rqa.trainers.retriever.arguments module": [[12, "module-local_rqa.trainers.retriever.arguments"]], "local_rqa.trainers.retriever.datasets module": [[12, "module-local_rqa.trainers.retriever.datasets"]], "local_rqa.trainers.retriever.embeddings module": [[12, "module-local_rqa.trainers.retriever.embeddings"]], "local_rqa.trainers.retriever.retriever_fid_trainer module": [[12, "module-local_rqa.trainers.retriever.retriever_fid_trainer"]], "local_rqa.trainers.retriever.retriever_replug_trainer module": [[12, "module-local_rqa.trainers.retriever.retriever_replug_trainer"]], "local_rqa.trainers.retriever.retriever_trainer module": [[12, "module-local_rqa.trainers.retriever.retriever_trainer"]], "Quickstart": [[14, "quickstart"]], "Prepare Document": [[14, "prepare-document"]], "Build an RQA System": [[14, "build-an-rqa-system"]], "Next Steps": [[14, "next-steps"]], "Data": [[16, "data"]], "What Data Do We Need?": [[16, "what-data-do-we-need"]], "Training Data": [[16, "training-data"]], "Evaluation Data": [[16, "evaluation-data"]], "Serving Data": [[16, "serving-data"]], "Data Schema": [[16, "data-schema"]], "How to Obtain RQA Data?": [[16, "how-to-obtain-rqa-data"]], "RQA Data Format": [[17, "rqa-data-format"]], "Training, Evaluation, and Test Files": [[17, "training-evaluation-and-test-files"]], "Document Database and Vector Index": [[17, "document-database-and-vector-index"]], "Prepare RQA Data": [[18, "prepare-rqa-data"]], "Prepare Data from Scratch": [[18, "prepare-data-from-scratch"]], "Prepare Document Pickle File": [[18, "prepare-document-pickle-file"]], "Generate Questions": [[18, "generate-questions"]], "Generate Answers": [[18, "generate-answers"]], "Convert from Existing Datasets": [[18, "convert-from-existing-datasets"]], "Evaluation": [[19, "evaluation"]], "End-to-End Evaluation": [[20, "end-to-end-evaluation"]], "Running Evaluation": [[20, "running-evaluation"], [21, "running-evaluation"]], "Customization": [[20, "customization"], [21, "customization"]], "Retriever Evaluation": [[21, "retriever-evaluation"]], "Serving": [[22, "serving"]], "Launchers": [[22, "launchers"]], "Acceleration Frameworks": [[22, "acceleration-frameworks"]], "Inference Acceleration Frameworks": [[23, "inference-acceleration-frameworks"]], "Accelerating SimpleRQA": [[23, "accelerating-simplerqa"]], "Accelerating Model Serving": [[23, "accelerating-model-serving"]], "Static Human Evaluation": [[24, "static-human-evaluation"]], "Interactive Chat": [[25, "interactive-chat"]], "Training": [[26, "training"]], "Training a Generator": [[27, "training-a-generator"]], "Fusion-in-Decoder Training (FiD)": [[28, "fusion-in-decoder-training-fid"]], "Running FiD Trainer": [[28, "running-fid-trainer"]], "SFT with Gold Data (SFT)": [[29, "sft-with-gold-data-sft"]], "Running SFT Trainer": [[29, "running-sft-trainer"]], "SFT with a Frozen Retriever (SwR)": [[30, "sft-with-a-frozen-retriever-swr"]], "Running SwR Trainer": [[30, "running-swr-trainer"]], "Training a Retriever": [[31, "training-a-retriever"]], "Contrastive Learning (CTL)": [[32, "contrastive-learning-ctl"]], "Running CTL Trainer": [[32, "running-ctl-trainer"]], "Distill from Cross-Attention scores (DCA)": [[33, "distill-from-cross-attention-scores-dca"]], "Running DCA Trainer": [[33, "running-dca-trainer"]], "Distill from an LM\u2019s probability distribution (RPG)": [[34, "distill-from-an-lm-s-probability-distribution-rpg"]], "Running RPG Trainer": [[34, "running-rpg-trainer"]], "Customize your RQA system": [[35, "customize-your-rqa-system"]], "Customize Model Trainers": [[36, "customize-model-trainers"]], "Databricks": [[37, "databricks"]], "Prepare Data": [[37, "prepare-data"], [38, "prepare-data"]], "Chunking and Formatting": [[37, "chunking-and-formatting"], [38, "chunking-and-formatting"]], "Generating QA": [[37, "generating-qa"], [38, "generating-qa"]], "Train a Retriever": [[37, "train-a-retriever"], [38, "train-a-retriever"]], "Train a Generator": [[37, "train-a-generator"], [38, "train-a-generator"]], "Automatic Evaluation": [[37, "automatic-evaluation"], [38, "automatic-evaluation"]], "Deploy the RQA system": [[37, "deploy-the-rqa-system"], [38, "deploy-the-rqa-system"]], "Faire": [[38, "faire"]], "Installation": [[13, "installation"]], "local_rqa.retrievers package": [[6, "local-rqa-retrievers-package"]], "local_rqa.retrievers.base module": [[6, "module-local_rqa.retrievers.base"]], "local_rqa.retrievers.bm25_retriever module": [[6, "local-rqa-retrievers-bm25-retriever-module"]], "local_rqa.retrievers.faiss_retriever module": [[6, "module-local_rqa.retrievers.faiss_retriever"]], "local_rqa.trainers.qa_llm namespace": [[11, "module-local_rqa.trainers.qa_llm"]], "local_rqa.trainers.qa_llm.arguments module": [[11, "module-local_rqa.trainers.qa_llm.arguments"]], "local_rqa.trainers.qa_llm.datasets module": [[11, "module-local_rqa.trainers.qa_llm.datasets"]], "local_rqa.trainers.qa_llm.supervised_fid_trainer module": [[11, "module-local_rqa.trainers.qa_llm.supervised_fid_trainer"]], "local_rqa.trainers.qa_llm.supervised_trainer module": [[11, "module-local_rqa.trainers.qa_llm.supervised_trainer"]], "local_rqa.trainers.qa_llm.with_retriever_fid_trainer module": [[11, "local-rqa-trainers-qa-llm-with-retriever-fid-trainer-module"]], "local_rqa.trainers.qa_llm.with_retriever_trainer module": [[11, "local-rqa-trainers-qa-llm-with-retriever-trainer-module"]], "Welcome to LocalRQA\u2019s documentation!": [[15, "welcome-to-localrqa-s-documentation"]], "\ud83c\udf1f Why LocalRQA?": [[15, "why-localrqa"]], "\ud83d\ude80 Getting Started!": [[15, "getting-started"]], "Indices and tables": [[15, "indices-and-tables"]]}, "indexentries": {"accelerationframework (class in local_rqa.constants)": [[1, "local_rqa.constants.AccelerationFramework"]], "context_overflow (local_rqa.constants.errorcode attribute)": [[1, "local_rqa.constants.ErrorCode.CONTEXT_OVERFLOW"]], "controller_no_worker (local_rqa.constants.errorcode attribute)": [[1, "local_rqa.constants.ErrorCode.CONTROLLER_NO_WORKER"]], "controller_worker_timeout (local_rqa.constants.errorcode attribute)": [[1, "local_rqa.constants.ErrorCode.CONTROLLER_WORKER_TIMEOUT"]], "cuda_out_of_memory (local_rqa.constants.errorcode attribute)": [[1, "local_rqa.constants.ErrorCode.CUDA_OUT_OF_MEMORY"]], "component (class in local_rqa.base)": [[1, "local_rqa.base.Component"]], "engine_overloaded (local_rqa.constants.errorcode attribute)": [[1, "local_rqa.constants.ErrorCode.ENGINE_OVERLOADED"]], "errorcode (class in local_rqa.constants)": [[1, "local_rqa.constants.ErrorCode"]], "gradio_request_error (local_rqa.constants.errorcode attribute)": [[1, "local_rqa.constants.ErrorCode.GRADIO_REQUEST_ERROR"]], "gradio_stream_unknown_error (local_rqa.constants.errorcode attribute)": [[1, "local_rqa.constants.ErrorCode.GRADIO_STREAM_UNKNOWN_ERROR"]], "incorrect_auth_key (local_rqa.constants.errorcode attribute)": [[1, "local_rqa.constants.ErrorCode.INCORRECT_AUTH_KEY"]], "internal_error (local_rqa.constants.errorcode attribute)": [[1, "local_rqa.constants.ErrorCode.INTERNAL_ERROR"]], "invalid_auth_key (local_rqa.constants.errorcode attribute)": [[1, "local_rqa.constants.ErrorCode.INVALID_AUTH_KEY"]], "invalid_model (local_rqa.constants.errorcode attribute)": [[1, "local_rqa.constants.ErrorCode.INVALID_MODEL"]], "no_permission (local_rqa.constants.errorcode attribute)": [[1, "local_rqa.constants.ErrorCode.NO_PERMISSION"]], "param_out_of_range (local_rqa.constants.errorcode attribute)": [[1, "local_rqa.constants.ErrorCode.PARAM_OUT_OF_RANGE"]], "quota_exceeded (local_rqa.constants.errorcode attribute)": [[1, "local_rqa.constants.ErrorCode.QUOTA_EXCEEDED"]], "rate_limit (local_rqa.constants.errorcode attribute)": [[1, "local_rqa.constants.ErrorCode.RATE_LIMIT"]], "sglang (local_rqa.constants.accelerationframework attribute)": [[1, "local_rqa.constants.AccelerationFramework.SGLANG"]], "tgi (local_rqa.constants.accelerationframework attribute)": [[1, "local_rqa.constants.AccelerationFramework.TGI"]], "validation_type_error (local_rqa.constants.errorcode attribute)": [[1, "local_rqa.constants.ErrorCode.VALIDATION_TYPE_ERROR"]], "vllm (local_rqa.constants.accelerationframework attribute)": [[1, "local_rqa.constants.AccelerationFramework.VLLM"]], "init_logger() (in module local_rqa.utils)": [[1, "local_rqa.utils.init_logger"]], "local_rqa": [[1, "module-local_rqa"]], "local_rqa.base": [[1, "module-local_rqa.base"]], "local_rqa.constants": [[1, "module-local_rqa.constants"]], "local_rqa.utils": [[1, "module-local_rqa.utils"]], "module": [[1, "module-local_rqa"], [1, "module-local_rqa.base"], [1, "module-local_rqa.constants"], [1, "module-local_rqa.utils"], [6, "module-local_rqa.retrievers"], [6, "module-local_rqa.retrievers.base"], [6, "module-local_rqa.retrievers.faiss_retriever"], [10, "module-local_rqa.trainers"], [10, "module-local_rqa.trainers.dist_utils"], [10, "module-local_rqa.trainers.utils"], [11, "module-local_rqa.trainers.qa_llm"], [11, "module-local_rqa.trainers.qa_llm.arguments"], [11, "module-local_rqa.trainers.qa_llm.datasets"], [11, "module-local_rqa.trainers.qa_llm.supervised_fid_trainer"], [11, "module-local_rqa.trainers.qa_llm.supervised_trainer"]], "pretty_print_semaphore() (in module local_rqa.utils)": [[1, "local_rqa.utils.pretty_print_semaphore"]], "run() (local_rqa.base.component method)": [[1, "local_rqa.base.Component.run"]], "run_input_keys (local_rqa.base.component attribute)": [[1, "local_rqa.base.Component.run_input_keys"]], "baseretriever (class in local_rqa.retrievers.base)": [[6, "local_rqa.retrievers.base.BaseRetriever"]], "dummyretriever (class in local_rqa.retrievers.base)": [[6, "local_rqa.retrievers.base.DummyRetriever"]], "faissretriever (class in local_rqa.retrievers.faiss_retriever)": [[6, "local_rqa.retrievers.faiss_retriever.FaissRetriever"]], "retrievaloutput (class in local_rqa.retrievers.base)": [[6, "local_rqa.retrievers.base.RetrievalOutput"]], "batch_source_documents (local_rqa.retrievers.base.retrievaloutput attribute)": [[6, "local_rqa.retrievers.base.RetrievalOutput.batch_source_documents"]], "from_disk() (local_rqa.retrievers.faiss_retriever.faissretriever static method)": [[6, "local_rqa.retrievers.faiss_retriever.FaissRetriever.from_disk"]], "local_rqa.retrievers": [[6, "module-local_rqa.retrievers"]], "local_rqa.retrievers.base": [[6, "module-local_rqa.retrievers.base"]], "local_rqa.retrievers.faiss_retriever": [[6, "module-local_rqa.retrievers.faiss_retriever"]], "prepare_docs_for_retrieval() (local_rqa.retrievers.faiss_retriever.faissretriever method)": [[6, "local_rqa.retrievers.faiss_retriever.FaissRetriever.prepare_docs_for_retrieval"]], "retrieve() (local_rqa.retrievers.base.baseretriever method)": [[6, "local_rqa.retrievers.base.BaseRetriever.retrieve"]], "retrieve() (local_rqa.retrievers.base.dummyretriever method)": [[6, "local_rqa.retrievers.base.DummyRetriever.retrieve"]], "retrieve() (local_rqa.retrievers.faiss_retriever.faissretriever method)": [[6, "local_rqa.retrievers.faiss_retriever.FaissRetriever.retrieve"]], "retrieve_w_score() (local_rqa.retrievers.faiss_retriever.faissretriever method)": [[6, "local_rqa.retrievers.faiss_retriever.FaissRetriever.retrieve_w_score"]], "run() (local_rqa.retrievers.base.baseretriever method)": [[6, "local_rqa.retrievers.base.BaseRetriever.run"]], "run_input_keys (local_rqa.retrievers.base.baseretriever attribute)": [[6, "local_rqa.retrievers.base.BaseRetriever.run_input_keys"]], "barrier() (in module local_rqa.trainers.dist_utils)": [[10, "local_rqa.trainers.dist_utils.barrier"]], "create_dir_if_not_exists() (in module local_rqa.trainers.utils)": [[10, "local_rqa.trainers.utils.create_dir_if_not_exists"]], "get_rank() (in module local_rqa.trainers.dist_utils)": [[10, "local_rqa.trainers.dist_utils.get_rank"]], "init_logger() (in module local_rqa.trainers.utils)": [[10, "local_rqa.trainers.utils.init_logger"]], "is_main() (in module local_rqa.trainers.dist_utils)": [[10, "local_rqa.trainers.dist_utils.is_main"]], "local_rqa.trainers": [[10, "module-local_rqa.trainers"]], "local_rqa.trainers.dist_utils": [[10, "module-local_rqa.trainers.dist_utils"]], "local_rqa.trainers.utils": [[10, "module-local_rqa.trainers.utils"]], "remove_optimizer_weights() (in module local_rqa.trainers.utils)": [[10, "local_rqa.trainers.utils.remove_optimizer_weights"]], "e2eqatrainingarguments (class in local_rqa.trainers.qa_llm.arguments)": [[11, "local_rqa.trainers.qa_llm.arguments.E2EQATrainingArguments"]], "noopdatacollator (class in local_rqa.trainers.qa_llm.datasets)": [[11, "local_rqa.trainers.qa_llm.datasets.NoopDataCollator"]], "retrievalqatrainingarguments (class in local_rqa.trainers.qa_llm.arguments)": [[11, "local_rqa.trainers.qa_llm.arguments.RetrievalQATrainingArguments"]], "supervisedfidrqawretrieverdataset (class in local_rqa.trainers.qa_llm.datasets)": [[11, "local_rqa.trainers.qa_llm.datasets.SupervisedFiDRQAwRetrieverDataset"]], "supervisedfidtrainer (class in local_rqa.trainers.qa_llm.supervised_fid_trainer)": [[11, "local_rqa.trainers.qa_llm.supervised_fid_trainer.SupervisedFiDTrainer"]], "supervisedrqadataset (class in local_rqa.trainers.qa_llm.datasets)": [[11, "local_rqa.trainers.qa_llm.datasets.SupervisedRQADataset"]], "supervisedrqawretrieverdataset (class in local_rqa.trainers.qa_llm.datasets)": [[11, "local_rqa.trainers.qa_llm.datasets.SupervisedRQAwRetrieverDataset"]], "supervisedtrainer (class in local_rqa.trainers.qa_llm.supervised_trainer)": [[11, "local_rqa.trainers.qa_llm.supervised_trainer.SupervisedTrainer"]], "batch_iterator() (in module local_rqa.trainers.qa_llm.datasets)": [[11, "local_rqa.trainers.qa_llm.datasets.batch_iterator"]], "compute_loss() (local_rqa.trainers.qa_llm.supervised_fid_trainer.supervisedfidtrainer method)": [[11, "local_rqa.trainers.qa_llm.supervised_fid_trainer.SupervisedFiDTrainer.compute_loss"]], "compute_loss() (local_rqa.trainers.qa_llm.supervised_trainer.supervisedtrainer method)": [[11, "local_rqa.trainers.qa_llm.supervised_trainer.SupervisedTrainer.compute_loss"]], "do_eval (local_rqa.trainers.qa_llm.arguments.e2eqatrainingarguments attribute)": [[11, "local_rqa.trainers.qa_llm.arguments.E2EQATrainingArguments.do_eval"]], "do_train (local_rqa.trainers.qa_llm.arguments.e2eqatrainingarguments attribute)": [[11, "local_rqa.trainers.qa_llm.arguments.E2EQATrainingArguments.do_train"]], "documents_path (local_rqa.trainers.qa_llm.arguments.retrievalqatrainingarguments attribute)": [[11, "local_rqa.trainers.qa_llm.arguments.RetrievalQATrainingArguments.documents_path"]], "encode_data() (local_rqa.trainers.qa_llm.datasets.supervisedfidrqawretrieverdataset method)": [[11, "local_rqa.trainers.qa_llm.datasets.SupervisedFiDRQAwRetrieverDataset.encode_data"]], "encode_data() (local_rqa.trainers.qa_llm.datasets.supervisedrqadataset method)": [[11, "local_rqa.trainers.qa_llm.datasets.SupervisedRQADataset.encode_data"]], "encode_data() (local_rqa.trainers.qa_llm.datasets.supervisedrqawretrieverdataset method)": [[11, "local_rqa.trainers.qa_llm.datasets.SupervisedRQAwRetrieverDataset.encode_data"]], "encode_fid_inputs() (local_rqa.trainers.qa_llm.datasets.supervisedfidrqawretrieverdataset method)": [[11, "local_rqa.trainers.qa_llm.datasets.SupervisedFiDRQAwRetrieverDataset.encode_fid_inputs"]], "eval_data_path (local_rqa.trainers.qa_llm.arguments.retrievalqatrainingarguments attribute)": [[11, "local_rqa.trainers.qa_llm.arguments.RetrievalQATrainingArguments.eval_data_path"]], "eval_steps (local_rqa.trainers.qa_llm.arguments.e2eqatrainingarguments attribute)": [[11, "local_rqa.trainers.qa_llm.arguments.E2EQATrainingArguments.eval_steps"]], "evaluation_loop() (local_rqa.trainers.qa_llm.supervised_fid_trainer.supervisedfidtrainer method)": [[11, "local_rqa.trainers.qa_llm.supervised_fid_trainer.SupervisedFiDTrainer.evaluation_loop"]], "evaluation_loop() (local_rqa.trainers.qa_llm.supervised_trainer.supervisedtrainer method)": [[11, "local_rqa.trainers.qa_llm.supervised_trainer.SupervisedTrainer.evaluation_loop"]], "evaluation_strategy (local_rqa.trainers.qa_llm.arguments.e2eqatrainingarguments attribute)": [[11, "local_rqa.trainers.qa_llm.arguments.E2EQATrainingArguments.evaluation_strategy"]], "learning_rate (local_rqa.trainers.qa_llm.arguments.e2eqatrainingarguments attribute)": [[11, "local_rqa.trainers.qa_llm.arguments.E2EQATrainingArguments.learning_rate"]], "load_best_model_at_end (local_rqa.trainers.qa_llm.arguments.e2eqatrainingarguments attribute)": [[11, "local_rqa.trainers.qa_llm.arguments.E2EQATrainingArguments.load_best_model_at_end"]], "local_rqa.trainers.qa_llm": [[11, "module-local_rqa.trainers.qa_llm"]], "local_rqa.trainers.qa_llm.arguments": [[11, "module-local_rqa.trainers.qa_llm.arguments"]], "local_rqa.trainers.qa_llm.datasets": [[11, "module-local_rqa.trainers.qa_llm.datasets"]], "local_rqa.trainers.qa_llm.supervised_fid_trainer": [[11, "module-local_rqa.trainers.qa_llm.supervised_fid_trainer"]], "local_rqa.trainers.qa_llm.supervised_trainer": [[11, "module-local_rqa.trainers.qa_llm.supervised_trainer"]], "logging_steps (local_rqa.trainers.qa_llm.arguments.e2eqatrainingarguments attribute)": [[11, "local_rqa.trainers.qa_llm.arguments.E2EQATrainingArguments.logging_steps"]], "lr_scheduler_kwargs (local_rqa.trainers.qa_llm.arguments.e2eqatrainingarguments attribute)": [[11, "local_rqa.trainers.qa_llm.arguments.E2EQATrainingArguments.lr_scheduler_kwargs"]], "lr_scheduler_kwargs (local_rqa.trainers.qa_llm.arguments.retrievalqatrainingarguments attribute)": [[11, "local_rqa.trainers.qa_llm.arguments.RetrievalQATrainingArguments.lr_scheduler_kwargs"]], "lr_scheduler_type (local_rqa.trainers.qa_llm.arguments.e2eqatrainingarguments attribute)": [[11, "local_rqa.trainers.qa_llm.arguments.E2EQATrainingArguments.lr_scheduler_type"]], "metric_for_best_model (local_rqa.trainers.qa_llm.arguments.e2eqatrainingarguments attribute)": [[11, "local_rqa.trainers.qa_llm.arguments.E2EQATrainingArguments.metric_for_best_model"]], "num_train_epochs (local_rqa.trainers.qa_llm.arguments.e2eqatrainingarguments attribute)": [[11, "local_rqa.trainers.qa_llm.arguments.E2EQATrainingArguments.num_train_epochs"]], "output_dir (local_rqa.trainers.qa_llm.arguments.e2eqatrainingarguments attribute)": [[11, "local_rqa.trainers.qa_llm.arguments.E2EQATrainingArguments.output_dir"]], "output_dir (local_rqa.trainers.qa_llm.arguments.retrievalqatrainingarguments attribute)": [[11, "local_rqa.trainers.qa_llm.arguments.RetrievalQATrainingArguments.output_dir"]], "per_device_eval_batch_size (local_rqa.trainers.qa_llm.arguments.e2eqatrainingarguments attribute)": [[11, "local_rqa.trainers.qa_llm.arguments.E2EQATrainingArguments.per_device_eval_batch_size"]], "pre_retrieve_all_docs() (local_rqa.trainers.qa_llm.datasets.supervisedfidrqawretrieverdataset method)": [[11, "local_rqa.trainers.qa_llm.datasets.SupervisedFiDRQAwRetrieverDataset.pre_retrieve_all_docs"]], "pre_retrieve_all_docs() (local_rqa.trainers.qa_llm.datasets.supervisedrqawretrieverdataset method)": [[11, "local_rqa.trainers.qa_llm.datasets.SupervisedRQAwRetrieverDataset.pre_retrieve_all_docs"]], "prediction_step() (local_rqa.trainers.qa_llm.supervised_fid_trainer.supervisedfidtrainer method)": [[11, "local_rqa.trainers.qa_llm.supervised_fid_trainer.SupervisedFiDTrainer.prediction_step"]], "prediction_step() (local_rqa.trainers.qa_llm.supervised_trainer.supervisedtrainer method)": [[11, "local_rqa.trainers.qa_llm.supervised_trainer.SupervisedTrainer.prediction_step"]], "prepare_data() (local_rqa.trainers.qa_llm.datasets.supervisedfidrqawretrieverdataset method)": [[11, "local_rqa.trainers.qa_llm.datasets.SupervisedFiDRQAwRetrieverDataset.prepare_data"]], "prepare_data() (local_rqa.trainers.qa_llm.datasets.supervisedrqadataset method)": [[11, "local_rqa.trainers.qa_llm.datasets.SupervisedRQADataset.prepare_data"]], "prepare_data() (local_rqa.trainers.qa_llm.datasets.supervisedrqawretrieverdataset method)": [[11, "local_rqa.trainers.qa_llm.datasets.SupervisedRQAwRetrieverDataset.prepare_data"]], "remove_unused_columns (local_rqa.trainers.qa_llm.arguments.e2eqatrainingarguments attribute)": [[11, "local_rqa.trainers.qa_llm.arguments.E2EQATrainingArguments.remove_unused_columns"]], "report_to (local_rqa.trainers.qa_llm.arguments.e2eqatrainingarguments attribute)": [[11, "local_rqa.trainers.qa_llm.arguments.E2EQATrainingArguments.report_to"]], "retriever_init() (in module local_rqa.trainers.qa_llm.datasets)": [[11, "local_rqa.trainers.qa_llm.datasets.retriever_init"]], "save_steps (local_rqa.trainers.qa_llm.arguments.e2eqatrainingarguments attribute)": [[11, "local_rqa.trainers.qa_llm.arguments.E2EQATrainingArguments.save_steps"]], "save_strategy (local_rqa.trainers.qa_llm.arguments.e2eqatrainingarguments attribute)": [[11, "local_rqa.trainers.qa_llm.arguments.E2EQATrainingArguments.save_strategy"]], "save_total_limit (local_rqa.trainers.qa_llm.arguments.e2eqatrainingarguments attribute)": [[11, "local_rqa.trainers.qa_llm.arguments.E2EQATrainingArguments.save_total_limit"]], "seed (local_rqa.trainers.qa_llm.arguments.e2eqatrainingarguments attribute)": [[11, "local_rqa.trainers.qa_llm.arguments.E2EQATrainingArguments.seed"]], "warmup_ratio (local_rqa.trainers.qa_llm.arguments.e2eqatrainingarguments attribute)": [[11, "local_rqa.trainers.qa_llm.arguments.E2EQATrainingArguments.warmup_ratio"]], "weight_decay (local_rqa.trainers.qa_llm.arguments.e2eqatrainingarguments attribute)": [[11, "local_rqa.trainers.qa_llm.arguments.E2EQATrainingArguments.weight_decay"]], "wrap_model_for_eval() (local_rqa.trainers.qa_llm.supervised_fid_trainer.supervisedfidtrainer method)": [[11, "local_rqa.trainers.qa_llm.supervised_fid_trainer.SupervisedFiDTrainer.wrap_model_for_eval"]], "wrap_model_for_eval() (local_rqa.trainers.qa_llm.supervised_trainer.supervisedtrainer method)": [[11, "local_rqa.trainers.qa_llm.supervised_trainer.SupervisedTrainer.wrap_model_for_eval"]], "write_predictions (local_rqa.trainers.qa_llm.arguments.retrievalqatrainingarguments attribute)": [[11, "local_rqa.trainers.qa_llm.arguments.RetrievalQATrainingArguments.write_predictions"]]}})